(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{766:function(e,t,n){"use strict";var a=n(20),r=n(21),i=n(23),c=n(22),s=n(0),o=n.n(s),l=n(121),m=n(16),u=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).loadBarFocus=!0,e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){this.loadBarFocus=!1}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.props.children)}}]),n}(o.a.Component);t.a=l.a(m.b,u)},767:function(e,t,n){},768:function(e,t,n){},769:function(e,t,n){"use strict";var a=n(4),r=n(20),i=n(21),c=n(23),s=n(22),o=(n(767),n(0)),l=n.n(o),m=(n(59),n(29)),u=n(15),p=n(16),d=(n(43),n(768),n(770)),h=n(121),f=n(19),v=n(766),g=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=Object(f.g)({HubWrapper:!0,gap:this.props.gap});return l.a.createElement(v.a,null,l.a.createElement(d.Helmet,null,l.a.createElement("title",null,"Aim: ".concat(this.props.project.path))),l.a.createElement("div",{className:e},l.a.createElement("div",{className:"HubWrapper__cont"},this.props.children)))}}]),n}(l.a.Component);g.defaultProps={gap:!0};var b=h.a(p.s,g),_=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).getHeaderHeight=function(){return 0},a._renderNav=function(){return a.props.nav.length?l.a.createElement("nav",{className:"ProjectWrapper__navbar"},a.props.nav.map(function(e,t){return l.a.createElement("div",{className:Object(f.g)({ProjectWrapper__navbar__item:!0,active:e.active}),key:t,onClick:function(){return e.onClick||{}}},e.icon,e.title)})):null},a._renderHeader=function(){return null},a._renderContent=function(){a.props.project;return a.props.isUpdating?null:l.a.createElement("div",{className:Object(f.g)({ProjectWrapper:!0,gap:a.props.gap})},l.a.createElement("div",{className:"ProjectWrapper__header",ref:a.projectWrapperHeaderRef},a._renderHeader()),l.a.createElement("div",{className:"ProjectWrapper__body"},!!a.props.navigation&&l.a.createElement("div",{className:"ProjectWrapper__navigation"},l.a.cloneElement(a.props.navigation,{contentWidth:a.props.contentWidth})),l.a.createElement("div",{className:"ProjectWrapper__cont",ref:a.contentRef},a.props.children)))},a.state={notFound:!1,isLoading:!0},a.projectWrapperHeaderRef=l.a.createRef(),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.getProjectData().then(function(t){e.props.getProjectParams(),e.props.incProgress()}).catch(function(){e.setState({notFound:!0})}),this.setState(function(e){return Object(a.a)(Object(a.a)({},e),{},{isLoading:!1})})}},{key:"render",value:function(){return this.props.isLoading?null:this.state.notFound?l.a.createElement(m.a,{to:u.v}):l.a.createElement(b,{gap:!1},this._renderContent())}}]),n}(l.a.Component);_.defaultProps={nav:[],gap:!0,size:"fluid"};t.a=h.a(p.q,_)},772:function(e,t,n){"use strict";var a=n(1),r=n(4),i=n(20),c=n(21),s=n(23),o=n(22),l=n(0),m=n.n(l),u=n(43),p=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var c;return Object(i.a)(this,n),(c=t.call(this,e)).handleDeleteButtonClick=function(){c.state.deleteNameMatch===c.props.name?(c.setState({deleteNameMatchStatus:null}),c.props.onDelete(),c.setState({deleteNameMatch:""})):c.setState({deleteNameMatchStatus:"Name does not match"})},c.handleInputChange=function(e){var t=e.target.value,n=e.target.name;c.setState(function(e){return Object(r.a)(Object(r.a)({},e),{},Object(a.a)({},n,t))})},c.handleRevertButtonClick=function(){c.props.onRevert()},c._renderDeleteContent=function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(u.a.Text,{type:"grey-dark",spacing:!0},c.props.message),m.a.createElement(u.a.Input,{onChange:c.handleInputChange,name:"deleteNameMatch",value:c.state.deleteNameMatch,label:'Please type "'.concat(c.props.name,'" to confirm')}),!!c.state.deleteNameMatchStatus&&m.a.createElement(u.a.Text,{type:"negative",spacingTop:!0,small:!0}," ",c.state.deleteNameMatchStatus," "),m.a.createElement(u.a.Text,{spacingTop:!0},m.a.createElement(u.a.Button,{className:"DangerZone__delete",onClick:function(){return c.handleDeleteButtonClick()},type:"negative"},"Hide")))},c._renderRevertContent=function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(u.a.Text,{type:"grey-dark",spacing:!0},m.a.createElement("strong",null,c.props.name)," is hidden"),m.a.createElement(u.a.Text,{spacingTop:!0},m.a.createElement(u.a.Button,{className:"DangerZone__delete",onClick:function(){return c.handleRevertButtonClick()},type:"secondary"},"Bring back")))},c.state={deleteNameMatch:null,deleteNameMatchStatus:null},c}return Object(c.a)(n,[{key:"render",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(u.a.Segment,{className:"DangerZone",type:"negative"},this.props.is_hidden?this._renderRevertContent():this._renderDeleteContent()))}}]),n}(m.a.Component);t.a=p},798:function(e,t,n){e.exports=n.p+"static/media/no_data.d9bc6f29.svg"},829:function(e,t,n){},830:function(e,t,n){},831:function(e,t,n){},832:function(e,t,n){},833:function(e,t,n){},860:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(38),i=n(4),c=n(20),s=n(21),o=n(23),l=n(22),m=(n(829),n(830),n(0)),u=n.n(m),p=n(770),d=n(59),h=n(29),f=n(309),v=n(771),g=n.n(v),b=n(308),_=n.n(b),E=n(769),y=(n(831),n(19)),x=n(43);function S(e){var t,n=e.children,r=e.className,i=e.height,c=e.width,s=e.footerTitle,o=e.footerLabels,l=e.header,m=Object(y.g)((t={ExperimentCell:!0},Object(a.a)(t,r,!!r),Object(a.a)(t,"height_".concat(i),!0),Object(a.a)(t,"width_".concat(c),!0),t));return u.a.createElement("div",{className:m},u.a.createElement("div",{className:"ExperimentCell__body"},n),u.a.createElement("div",{className:"ExperimentCell__footer"},!!l&&u.a.createElement(x.a.Text,{overline:!0,bold:!0,type:"primary"},l),!!(null===o||void 0===o?void 0:o.length)&&u.a.createElement("div",{className:"ExperimentCell__footer__labels"},o.map(function(e,t){return u.a.createElement(x.a.Label,{className:"ExperimentCell__footer__label",key:t},e)})),!!s&&u.a.createElement(x.a.Text,{className:"ExperimentCell__footer__title",type:"grey-dark",caption:!0,inline:!0},s)))}S.defaultProps={footerTitle:"",footerLabels:[],height:"static",width:1};var O=u.a.memo(S),j=n(16),T=n(121),C=n(17),N=n(15),W=(n(832),n(8)),w=n.n(W),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},M=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var H=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a)));return i.state={},i.styles={ellipsis:{position:"fixed",visibility:"hidden",top:0,left:0}},i.elements={},i.onResize=i.onResize.bind(i),i.onTruncate=i.onTruncate.bind(i),i.calcTargetWidth=i.calcTargetWidth.bind(i),i.measureWidth=i.measureWidth.bind(i),i.getLines=i.getLines.bind(i),i.renderLine=i.renderLine.bind(i),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m["Component"]),M(t,[{key:"componentDidMount",value:function(){var e=this.elements.text,t=this.calcTargetWidth,n=this.onResize,a=document.createElement("canvas");this.canvasContext=a.getContext("2d"),t(function(){e&&e.parentNode.removeChild(e)}),window.addEventListener("resize",n)}},{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&this.forceUpdate(),this.props.width!==e.width&&this.calcTargetWidth()}},{key:"componentWillUnmount",value:function(){var e=this.elements.ellipsis,t=this.onResize,n=this.timeout;e.parentNode.removeChild(e),window.removeEventListener("resize",t),window.cancelAnimationFrame(n)}},{key:"innerText",value:function(e){var t=document.createElement("div"),n="innerText"in window.HTMLElement.prototype?"innerText":"textContent";t.innerHTML=e.innerHTML.replace(/\r\n|\r|\n/g," ");var a=t[n],r=document.createElement("div");return r.innerHTML="foo<br/>bar","foo\nbar"!==r[n].replace(/\r\n|\r/g,"\n")&&(t.innerHTML=t.innerHTML.replace(/<br.*?[\/]?>/gi,"\n"),a=t[n]),a}},{key:"onResize",value:function(){this.calcTargetWidth()}},{key:"onTruncate",value:function(e){var t=this.props.onTruncate;"function"===typeof t&&(this.timeout=window.requestAnimationFrame(function(){t(e)}))}},{key:"calcTargetWidth",value:function(e){var t=this.elements.target,n=this.calcTargetWidth,a=this.canvasContext,r=this.props.width;if(t){var i=r||Math.floor(t.parentNode.getBoundingClientRect().width);if(!i)return window.requestAnimationFrame(function(){return n(e)});var c=window.getComputedStyle(t),s=[c["font-weight"],c["font-style"],c["font-size"],c["font-family"]].join(" ");a.font=s,this.setState({targetWidth:i},e)}}},{key:"measureWidth",value:function(e){return this.canvasContext.measureText(e).width}},{key:"ellipsisWidth",value:function(e){return e.offsetWidth}},{key:"trimRight",value:function(e){return e.replace(/\s+$/,"")}},{key:"getLines",value:function(){for(var e=this.elements,t=this.props,n=t.lines,a=t.ellipsis,r=t.trimWhitespace,i=this.state.targetWidth,c=this.innerText,s=this.measureWidth,o=this.onTruncate,l=this.trimRight,m=[],p=c(e.text).split("\n").map(function(e){return e.split(" ")}),d=!0,h=this.ellipsisWidth(this.elements.ellipsis),f=1;f<=n;f++){var v=p[0];if(0!==v.length){var g=v.join(" ");if(s(g)<=i&&1===p.length){d=!1,m.push(g);break}if(f===n){for(var b=v.join(" "),_=0,E=b.length-1;_<=E;){var y=Math.floor((_+E)/2);s(b.slice(0,y+1))+h<=i?_=y+1:E=y-1}var x=b.slice(0,_);if(r)for(x=l(x);!x.length&&m.length;){x=l(m.pop())}g=u.a.createElement("span",null,x,a)}else{for(var S=0,O=v.length-1;S<=O;){var j=Math.floor((S+O)/2);s(v.slice(0,j+1).join(" "))<=i?S=j+1:O=j-1}if(0===S){f=n-1;continue}g=v.slice(0,S).join(" "),p[0].splice(0,S)}m.push(g)}else m.push(),p.shift(),f--}return o(d),m}},{key:"renderLine",value:function(e,t,n){if(t===n.length-1)return u.a.createElement("span",{key:t},e);var a=u.a.createElement("br",{key:t+"br"});return e?[u.a.createElement("span",{key:t},e),a]:a}},{key:"render",value:function(){var e=this,t=this.elements.target,n=this.props,a=n.children,r=n.ellipsis,i=n.lines,c=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(n,["children","ellipsis","lines"]),s=this.state.targetWidth,o=this.getLines,l=this.renderLine,m=this.onTruncate,p=void 0;return"undefined"!==typeof window&&!(!t||!s)&&(i>0?p=o().map(l):(p=a,m(!1))),delete c.onTruncate,delete c.trimWhitespace,u.a.createElement("span",k({},c,{ref:function(t){e.elements.target=t}}),u.a.createElement("span",null,p),u.a.createElement("span",{ref:function(t){e.elements.text=t}},a),u.a.createElement("span",{ref:function(t){e.elements.ellipsis=t},style:this.styles.ellipsis},r))}}]),t}();H.propTypes={children:w.a.node,ellipsis:w.a.node,lines:w.a.oneOfType([w.a.oneOf([!1]),w.a.number]),trimWhitespace:w.a.bool,width:w.a.number,onTruncate:w.a.func},H.defaultProps={children:"",ellipsis:"\u2026",lines:1,trimWhitespace:!1,width:0};var R=H,L=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).init=function(){a.width=a.navbarRef.current.offsetWidth,a.handleResize()},a.handleResize=function(){if(a.props.contentWidth){var e=(window.innerWidth-a.headerWidth-a.props.contentWidth)/2-a.width-a.xMargin;e>=a.xMargin?(a.setLeft(e),a.navbarRef.current.style.display="block"):a.navbarRef.current.style.display="none"}else setTimeout(function(){return a.handleResize()},20)},a.setLeft=function(e){a.navbarRef.current.style.left="".concat(e,"px")},a.handleShowMoreClick=function(){a.setState({overflowHide:!1},function(){return a.init()})},a.commitsCompare=function(e,t){return e.date>t.date?-1:e.date<t.date?1:0},a.formatCommitMsg=function(e){return Number.isInteger(e)&&10==="".concat(e).length?g.a.unix(e).format("HH:mm \xb7 D MMM, YY"):e},a._renderCommit=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(d.b,{to:Object(y.d)(N.l,{experiment_name:a.props.experimentName,commit_id:e.hash})},u.a.createElement("div",{className:"CommitNavigation__item__short"},!!e.process&&!1===e.process.finish&&u.a.createElement("div",{className:"CommitNavigation__item__indicator"}),u.a.createElement(R,{lines:1},u.a.createElement(x.a.Text,{small:!0},a.formatCommitMsg(e.message)))),u.a.createElement("div",{className:"CommitNavigation__item__full"},!!e.process&&!1===e.process.finish&&u.a.createElement("div",{className:"CommitNavigation__item__indicator"}),u.a.createElement(R,{lines:4},u.a.createElement(x.a.Text,{small:!0},a.formatCommitMsg(e.message))))))},a._renderCommits=function(){var e=a.props.commits;return(e=e.filter(function(e){return!e.archived})).sort(a.commitsCompare),u.a.createElement(u.a.Fragment,null,e.slice(0,12).map(function(e,t){return u.a.createElement(x.a.MenuItem,{className:"CommitNavigation__item",key:t,active:a.props.active===e.hash},a._renderCommit(e))}),e.slice(12,50).map(function(e,t){return u.a.createElement(x.a.MenuItem,{className:Object(y.g)({CommitNavigation__item:!0,hidden:a.state.overflowHide}),key:t,active:a.props.active===e.hash},a._renderCommit(e))}),e.length>12&&a.state.overflowHide&&u.a.createElement(x.a.Text,{center:!0,spacingTop:!0},u.a.createElement(x.a.Button,{size:"tiny",type:"primary",ghost:!0,onClick:function(){return a.handleShowMoreClick()}},"Show more")))},a._renderIndex=function(){return u.a.createElement("div",{key:"current",className:Object(y.g)({CommitNavigation__current:!0,active:"index"===a.props.active})},u.a.createElement(d.b,{to:Object(y.d)(N.l,{experiment_name:a.props.experimentName,commit_id:"index"})},u.a.createElement(x.a.Text,{className:"CommitNavigation__current__title",small:!0},"Index")))},a.state={overflowHide:!0},a.navbarRef=u.a.createRef(),a.headerWidth=70,a.xMargin=5,a.width=230,a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.init(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=Object(y.g)({CommitNavigation:!0});return u.a.createElement("div",{className:e,ref:this.navbarRef},this.props.commits.filter(function(e){return!e.archived}).length>0&&u.a.createElement(x.a.Menu,{className:"CommitNavigation__nav",outline:!1,header:"Runs:"},this._renderCommits()))}}]),n}(m.Component);L.defaultProps={commits:[]};var P=L,I=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return u.a.createElement("div",{className:"IncompatibleVersionScreen__heading"},u.a.createElement(x.a.Text,{size:1,type:"primary",spacingTop:!0,center:!0},"503"),u.a.createElement(x.a.Text,{size:4,type:"grey-light",center:!0},"Error. Incompatible version"))}}]),n}(m.Component),F=(n(833),function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return u.a.createElement("div",{className:"CurrentRunIndicator__current"},u.a.createElement("div",{className:"CurrentRunIndicator__current__indicator"},u.a.createElement("div",{className:"CurrentRunIndicator__current__indicator__anim"})))}}]),n}(m.PureComponent)),z=n(222),B=(n(772),function(e){Object(o.a)(m,e);var t=Object(l.a)(m);function m(e){var s;return Object(c.a)(this,m),(s=t.call(this,e)).getTags=function(){var e;s.setState(function(e){return Object(i.a)(Object(i.a)({},e),{},{tagsAreLoading:!0})}),s.props.getCommitTags(null===(e=s.state.commit)||void 0===e?void 0:e.hash).then(function(e){s.setState({tags:e})}).catch(function(e){}).finally(function(){s.setState(function(e){return Object(i.a)(Object(i.a)({},e),{},{tagsAreLoading:!1})})})},s.onIndex=function(){return!1},s.WSOpen=function(){!s.WSClient&&s.onIndex()&&(s.WSClient=new WebSocket("".concat(C.w,"/insight")),s.WSClient.onopen=s.WSOnOpen,s.WSClient.onerror=s.WSOnError,s.WSClient.onmessage=s.WSOnMessage)},s.WSClose=function(){s.WSClient&&(s.WSClient.close(),s.WSClient=null)},s.WSOnOpen=function(){},s.WSEncodeInsight=function(e){var t=Object.assign({branch:s.props.match.params.experiment_name},e),n=JSON.stringify(t);return btoa(n)},s.WSDecodeInsight=function(e){var t=atob(e);return JSON.parse(t)},s.WSOnError=function(){s.WSClient=null,setTimeout(function(){return s.WSOpen()},1e3)},s.WSSendMsg=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=JSON.stringify(e);s.WSClient&&s.WSClient.readyState===WebSocket.OPEN?s.WSClient.send(n):t&&setTimeout(function(){return s.WSSendMsg(e,t)},50)},s.WSSubscribeToInsightUpdates=function(e){s.WSSendMsg({event:"subscribe",data:e},!0)},s.WSUnsubscribeFromInsightUpdates=function(e){s.WSSendMsg({event:"unsubscribe",data:e},!0)},s.WSOnMessage=function(e){var t=JSON.parse(e.data);switch(t.event){case"insight_update":s.WSOnInsightUpdate(t.header,t.data)}},s.WSOnInsightUpdate=function(e,t){switch((e=s.WSDecodeInsight(e)).insight){case"stat":s.updateStat(e.name,JSON.parse(t));break;case"metric":s.updateMetric(e.name,t)}},s.statSubscribeToUpdates=function(e,t){var n=s.WSEncodeInsight({insight:"stat",name:e,resource:t,file_path:"dirs/".concat(e,"/").concat(t,".log")});s.WSSubscribeToInsightUpdates(n)},s.statUnsubscribeFromUpdates=function(e,t){var n=s.WSEncodeInsight({insight:"stat",name:e,resource:t,file_path:"dirs/".concat(e,"/").concat(t,".log")});s.WSUnsubscribeFromInsightUpdates(n)},s.metricSubscribeToUpdates=function(e,t){var n=s.WSEncodeInsight({insight:"metric",name:e,format:t,file_path:"metrics/".concat(e,".log")});s.WSSubscribeToInsightUpdates(n)},s.metricUnsubscribeFromUpdates=function(e){var t=s.WSEncodeInsight({insight:"metric",name:e,file_path:"metrics/".concat(e,".log")});s.WSUnsubscribeFromInsightUpdates(t)},s.updateMetric=function(e,t){isNaN(t)||(t=parseFloat(t),s.setState(function(n){var c=n.metricsData,s=[];return c[e].data&&c[e].data.length&&(s=Object(r.a)(c[e].data)),s.push(t),c=Object.assign({},c,Object(a.a)({},e,Object.assign({},c[e],{data:s,rerender:!1}))),Object(i.a)(Object(i.a)({},n),{},{metricsData:c})}))},s.handleResize=function(){if(s.contentRef.current){var e=s.contentRef.current.containerRef.current.offsetWidth;s.setState(function(t){return Object(i.a)(Object(i.a)({},t),{},{contentWidth:e})})}else setTimeout(function(){return s.handleResize()},50)},s.getExperiment=function(){s.props.incProgress();var e=s.props.match.params.experiment_name,t=s.props.match.params.commit_id;s.props.getExperiment(e,t).then(function(e){e.maps&&Array.isArray(e.maps)&&e.maps.forEach(function(e){"__METRICS__"in e.data&&delete e.data.__METRICS__});var t={};e.annotations&&e.annotations.forEach(function(e){var n={};e.data.forEach(function(e){var t=e.meta.label;t in n||(n[t]=[]),n[t].push(e)}),t[e.name]=n}),s.props.incProgress(),s.setState(function(n){return Object(i.a)(Object(i.a)({},n),{},{experiment:e,annotations:t,commits:e.commits?Object.values(e.commits):[],commit:e.commit?e.commit:null,selectedModel:!!e.models&&e.models[0]})},function(){s.getTags()})}).catch(function(e){501===e.status?s.setState({versionError:!0}):404!==e.status&&500!==e.status||s.setState({notFound:!0})}).finally(function(){s.setState(function(e){return Object(i.a)(Object(i.a)({},e),{},{isLoading:!1})}),setTimeout(function(){return s.props.completeProgress()},300)})},s.handleModelOpen=function(e){s.setState({selectedModel:e})},s.handleBranchChange=function(e,t){var n=t.action,a=s.props.match.params.experiment_name;"select-option"===n&&e.value!==a&&s.setState({selectBranch:e.value})},s.handleArchivationBtnClick=function(){var e=s.props.match.params.experiment_name,t=s.state.commit.hash;s.setState({archivationBtn:{loading:!0,disabled:!0}}),s.props.updateCommitArchivationFlag(e,t).then(function(e){s.setState(function(t){return Object(i.a)(Object(i.a)({},t),{},{commit:Object(i.a)(Object(i.a)({},t.commit),{},{archived:e.archived})})})}).finally(function(){s.setState({archivationBtn:{loading:!1,disabled:!1}})})},s._formatFileSize=function(e){var t=Object(y.m)(e);return"".concat(t[0]).concat(t[1])},s._renderMetric=function(e,t){var n=e.name;return n.startsWith("__system__")&&(n=Object(y.n)(e.name)),u.a.createElement(u.a.Fragment,null,e.traces.map(function(a,r){return u.a.createElement(O,{header:"metric",footerTitle:n,footerLabels:a.context?Object.keys(a.context).map(function(e){return"".concat(e,": ").concat(a.context[e])}):[],key:"".concat(10*t+5,"-").concat(r)},u.a.createElement(x.a.LineChart,{header:e.name,data:a.data,xAxisFormat:"step",smooth:!1}))}))},s._renderExperimentHeader=function(){var e,t,n,a,r,i,c=s.props.match.params.experiment_name,o=null;return(null===(e=s.state.commit)||void 0===e?void 0:null===(t=e.process)||void 0===t?void 0:t.time)&&(o=Object(y.l)(s.state.commit.process.time)),u.a.createElement(u.a.Fragment,null,!!s.props.project.branches&&!!s.props.project.branches.length&&u.a.createElement("div",{className:"HubExperimentScreen__header"},u.a.createElement("div",{className:"HubExperimentScreen__header__top"},u.a.createElement(x.a.Dropdown,{className:"HubExperimentScreen__branchSelect",width:200,options:s.props.project.branches&&s.props.project.branches.map(function(e){return{value:e,label:"".concat(e)}}),defaultValue:{value:c,label:"".concat(c)},onChange:s.handleBranchChange}),u.a.createElement("div",null,!!s.state.commit&&u.a.createElement("div",{className:"HubExperimentScreen__header__content"},u.a.createElement("div",{className:"HubExperimentScreen__header__content__process"},!1===(null===(n=s.state.commit)||void 0===n?void 0:null===(a=n.process)||void 0===a?void 0:a.finish)&&u.a.createElement(F,null),!!(null===(r=s.state.commit)||void 0===r?void 0:r.process)&&u.a.createElement("div",null,!!s.state.commit.process.start_date&&u.a.createElement(x.a.Text,{type:"grey",small:!0},s.state.commit.process.uuid?u.a.createElement(d.b,{to:Object(y.d)(N.k,{process_id:s.state.commit.process.uuid})},"Process"):u.a.createElement(x.a.Text,{inline:!0},"Process")," ","started at"," ",g.a.unix(s.state.commit.process.start_date).format("HH:mm:ss \xb7 D MMM, YY")),!!o&&u.a.createElement(x.a.Text,{type:"grey",small:!0},"Execution Time:"," ".concat(o.hours,"h ").concat(o.minutes,"m ").concat(o.seconds,"s")))),!!(null===(i=s.state.tags)||void 0===i?void 0:i.length)&&u.a.createElement("div",{className:"HubExperimentScreen__header__tags"},!s.state.tagsAreLoading&&s.state.tags.length>0&&u.a.createElement(d.b,{to:Object(y.d)(N.h,{tag_id:s.state.tags[0].id})},u.a.createElement(x.a.Label,{key:s.state.tags[0].id,color:s.state.tags[0].color},s.state.tags[0].name))))))))},s._renderEmptyBranch=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=s.props.match.params.experiment_name;return u.a.createElement(u.a.Fragment,null,s._renderExperimentHeader(),u.a.createElement("div",{className:"HubExperimentScreen__empty"},u.a.createElement(f.a,{className:"HubExperimentScreen__empty__illustration",src:n(798)}),u.a.createElement(x.a.Text,{size:6,type:"grey-light",center:!0},'Experiment "'.concat(t,e?'" is empty':'" does not exist'))))},s._renderEmptyIndex=function(){return u.a.createElement(u.a.Fragment,null,s._renderExperimentHeader(),u.a.createElement("div",{className:"HubExperimentScreen__empty"},u.a.createElement(f.a,{className:"HubExperimentScreen__empty__illustration",src:n(798)}),u.a.createElement(x.a.Text,{size:6,type:"grey-light",center:!0},"Nothing to show \u2014 empty run")))},s._renderNavigation=function(){var e,t,n;if(!(null===(e=s.state.experiment)||void 0===e?void 0:e.branch_init)||(null===(t=s.state.experiment)||void 0===t?void 0:t.branch_empty))return null;var a=s.props.match.params.experiment_name;return u.a.createElement(P,{commits:s.state.commits,active:null===(n=s.state.commit)||void 0===n?void 0:n.hash,experimentName:a})},s._renderParameters=function(){var e,t;if(!(null===(e=s.state.experiment)||void 0===e?void 0:null===(t=e.maps)||void 0===t?void 0:t.filter(function(e){return e.data&&Object.keys(e.data).length}).length))return u.a.createElement(x.a.Text,{type:"grey",center:!0},"No logged parameters");var n=[];return s.state.experiment.maps.forEach(function(e,t){e.nested?Object.keys(e.data).forEach(function(t,a){n.push({name:t,data:e.data[t]})}):n.push({name:t,data:e})}),u.a.createElement("div",{className:"HubExperimentScreen__grid"},u.a.createElement("div",{className:"HubExperimentScreen__grid__wrapper"},n.map(function(e,t){return u.a.createElement(O,{header:e.name,height:"auto",width:2},u.a.createElement("div",{className:"ExperimentParams ExperimentParams--tree",key:t},u.a.createElement(_.a,{name:!1,theme:"bright:inverted",src:e.data})))})))},s._renderMetrics=function(){var e,t,n=null===(e=s.state.experiment)||void 0===e?void 0:null===(t=e.metrics)||void 0===t?void 0:t.filter(function(e){var t;return!(null===e||void 0===e?void 0:null===(t=e.name)||void 0===t?void 0:t.startsWith("__system__"))});return n&&n.length?u.a.createElement("div",{className:"HubExperimentScreen__grid"},u.a.createElement("div",{className:"HubExperimentScreen__grid__wrapper"},n.map(function(e,t){return s._renderMetric(e,t)}))):u.a.createElement(x.a.Text,{type:"grey",center:!0},"No tracked metrics")},s._renderSystemMetrics=function(){var e,t,n=null===(e=s.state.experiment)||void 0===e?void 0:null===(t=e.metrics)||void 0===t?void 0:t.filter(function(e){var t;return null===e||void 0===e?void 0:null===(t=e.name)||void 0===t?void 0:t.startsWith("__system__")});return n&&n.length?u.a.createElement("div",{className:"HubExperimentScreen__grid"},u.a.createElement("div",{className:"HubExperimentScreen__grid__wrapper"},n.map(function(e,t){return s._renderMetric(e,t)}))):u.a.createElement(x.a.Text,{type:"grey",center:!0},"No tracked system metrics")},s._renderSettings=function(){return u.a.createElement("div",null,u.a.createElement(x.a.Segment,{type:"negative"},s.state.commit.archived&&u.a.createElement(x.a.Text,{type:"grey-dark",spacing:!0},"This run is archived."),u.a.createElement(x.a.Button,Object.assign({type:s.state.commit.archived?"secondary":"negative",onClick:function(){return s.handleArchivationBtnClick()}},s.state.archivationBtn),s.state.commit.archived?"Unarchive":"Archive this run"),!s.state.commit.archived&&u.a.createElement(x.a.Text,{type:"grey-dark",spacingTop:!0},"Archived runs will not appear in search both on Dashboard and Explore.")))},s._renderContent=function(){return s.state.versionError?u.a.createElement(I,null):s.state.experiment&&s.state.experiment.branch_init?s.state.experiment.branch_empty?s._renderEmptyBranch():s.state.experiment.maps.length||s.state.experiment.metrics.length?u.a.createElement(u.a.Fragment,null,s._renderExperimentHeader(),u.a.createElement("div",{className:"HubExperimentScreen__divider"}),u.a.createElement(x.a.Tabs,{leftItems:u.a.createElement(u.a.Fragment,null,u.a.createElement(x.a.Tab,{className:"",active:"parameters"===s.state.activeTab,onClick:function(){return s.setState({activeTab:"parameters"})}},"Parameters"),u.a.createElement(x.a.Tab,{className:"",active:"metrics"===s.state.activeTab,onClick:function(){return s.setState({activeTab:"metrics"})}},"Metrics"),u.a.createElement(x.a.Tab,{className:"",active:"system"===s.state.activeTab,onClick:function(){return s.setState({activeTab:"system"})}},"System"),u.a.createElement(x.a.Tab,{className:"",active:"settings"===s.state.activeTab,onClick:function(){return s.setState({activeTab:"settings"})}},"Settings"))}),u.a.createElement("div",{className:"HubExperimentScreen__body"},"parameters"===s.state.activeTab&&s._renderParameters(),"metrics"===s.state.activeTab&&s._renderMetrics(),"system"===s.state.activeTab&&s._renderSystemMetrics(),"settings"===s.state.activeTab&&s._renderSettings())):s._renderEmptyIndex():s._renderEmptyBranch(!1)},s.state={isLoading:!0,notFound:!1,versionError:!1,experiment:null,selectedModel:!1,selectBranch:null,commits:[],commit:{},contentWidth:null,metricsData:{},tags:[],tagsAreLoading:!0,activeTab:e.tab,archivationBtn:{loading:!1,disabled:!1}},s.contentRef=u.a.createRef(),s.WSClient=null,s.tabs=["parameters","metrics","system","settings"],e.resetProgress(),s}return Object(s.a)(m,[{key:"componentDidMount",value:function(){this.getExperiment(),this.handleResize(),window.addEventListener("resize",this.handleResize),z.b("Experiment detail")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(e.location.pathname!==this.props.location.pathname){var a=Object(y.w)(this.props.location.pathname,"/"),r=Object(y.w)(e.location.pathname,"/"),i=a.split("/"),c=a,s=r;this.tabs.forEach(function(e){c=Object(y.w)(c,e),s=Object(y.w)(s,e)}),c=Object(y.w)(c,"/"),s=Object(y.w)(s,"/");var o=this.tabs[0];i&&i.length&&-1!==this.tabs.indexOf(i[i.length-1])&&(o=i[i.length-1]),c!==s?(this.WSClose(),this.setState({isLoading:!0,notFound:!1,experiment:null,annotations:null,expandCluster:{},selectedModel:!1,selectBranch:null,tags:[],activeTab:o},function(){n.getExperiment()})):this.setState({activeTab:o})}if(t.activeTab!==this.state.activeTab){var l=Object(y.w)(this.props.location.pathname,"/");if(l.endsWith(this.state.activeTab))return;var m=l;this.tabs.forEach(function(e){m=Object(y.w)(m,e)}),m=Object(y.w)(m,"/"),this.props.history.push("".concat(m,"/").concat(this.state.activeTab))}}},{key:"render",value:function(){var e=this.props.match.params.experiment_name;return this.state.isLoading?null:this.state.notFound?u.a.createElement(h.a,{to:N.v}):this.state.selectBranch?u.a.createElement(h.a,{to:Object(y.d)(N.l,{experiment_name:this.state.selectBranch,commit_id:"latest"}),push:!0}):u.a.createElement(E.a,{experimentName:e,navigation:this._renderNavigation(),contentWidth:this.state.contentWidth},u.a.createElement(p.Helmet,null,u.a.createElement("meta",{title:"",content:""})),u.a.createElement(x.a.Container,{size:"small",ref:this.contentRef},this._renderContent()))}}]),m}(u.a.Component));t.default=Object(h.h)(T.a(j.n,B))}}]);