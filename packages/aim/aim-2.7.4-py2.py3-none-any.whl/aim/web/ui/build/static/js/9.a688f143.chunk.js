(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{766:function(e,t,a){"use strict";var n=a(20),r=a(21),c=a(23),i=a(22),s=a(0),l=a.n(s),o=a(121),u=a(16),p=function(e){Object(c.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).loadBarFocus=!0,e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){this.loadBarFocus=!1}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.props.children)}}]),a}(l.a.Component);t.a=o.a(u.b,p)},767:function(e,t,a){},768:function(e,t,a){},769:function(e,t,a){"use strict";var n=a(4),r=a(20),c=a(21),i=a(23),s=a(22),l=(a(767),a(0)),o=a.n(l),u=(a(59),a(29)),p=a(15),m=a(16),d=(a(43),a(768),a(770)),h=a(121),b=a(19),v=a(766),g=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=Object(b.g)({HubWrapper:!0,gap:this.props.gap});return o.a.createElement(v.a,null,o.a.createElement(d.Helmet,null,o.a.createElement("title",null,"Aim: ".concat(this.props.project.path))),o.a.createElement("div",{className:e},o.a.createElement("div",{className:"HubWrapper__cont"},this.props.children)))}}]),a}(o.a.Component);g.defaultProps={gap:!0};var f=h.a(m.s,g),E=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getHeaderHeight=function(){return 0},n._renderNav=function(){return n.props.nav.length?o.a.createElement("nav",{className:"ProjectWrapper__navbar"},n.props.nav.map(function(e,t){return o.a.createElement("div",{className:Object(b.g)({ProjectWrapper__navbar__item:!0,active:e.active}),key:t,onClick:function(){return e.onClick||{}}},e.icon,e.title)})):null},n._renderHeader=function(){return null},n._renderContent=function(){n.props.project;return n.props.isUpdating?null:o.a.createElement("div",{className:Object(b.g)({ProjectWrapper:!0,gap:n.props.gap})},o.a.createElement("div",{className:"ProjectWrapper__header",ref:n.projectWrapperHeaderRef},n._renderHeader()),o.a.createElement("div",{className:"ProjectWrapper__body"},!!n.props.navigation&&o.a.createElement("div",{className:"ProjectWrapper__navigation"},o.a.cloneElement(n.props.navigation,{contentWidth:n.props.contentWidth})),o.a.createElement("div",{className:"ProjectWrapper__cont",ref:n.contentRef},n.props.children)))},n.state={notFound:!1,isLoading:!0},n.projectWrapperHeaderRef=o.a.createRef(),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getProjectData().then(function(t){e.props.getProjectParams(),e.props.incProgress()}).catch(function(){e.setState({notFound:!0})}),this.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{isLoading:!1})})}},{key:"render",value:function(){return this.props.isLoading?null:this.state.notFound?o.a.createElement(u.a,{to:p.v}):o.a.createElement(f,{gap:!1},this._renderContent())}}]),a}(o.a.Component);E.defaultProps={nav:[],gap:!0,size:"fluid"};t.a=h.a(m.q,E)},772:function(e,t,a){"use strict";var n=a(1),r=a(4),c=a(20),i=a(21),s=a(23),l=a(22),o=a(0),u=a.n(o),p=a(43),m=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).handleDeleteButtonClick=function(){i.state.deleteNameMatch===i.props.name?(i.setState({deleteNameMatchStatus:null}),i.props.onDelete(),i.setState({deleteNameMatch:""})):i.setState({deleteNameMatchStatus:"Name does not match"})},i.handleInputChange=function(e){var t=e.target.value,a=e.target.name;i.setState(function(e){return Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},a,t))})},i.handleRevertButtonClick=function(){i.props.onRevert()},i._renderDeleteContent=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(p.a.Text,{type:"grey-dark",spacing:!0},i.props.message),u.a.createElement(p.a.Input,{onChange:i.handleInputChange,name:"deleteNameMatch",value:i.state.deleteNameMatch,label:'Please type "'.concat(i.props.name,'" to confirm')}),!!i.state.deleteNameMatchStatus&&u.a.createElement(p.a.Text,{type:"negative",spacingTop:!0,small:!0}," ",i.state.deleteNameMatchStatus," "),u.a.createElement(p.a.Text,{spacingTop:!0},u.a.createElement(p.a.Button,{className:"DangerZone__delete",onClick:function(){return i.handleDeleteButtonClick()},type:"negative"},"Hide")))},i._renderRevertContent=function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(p.a.Text,{type:"grey-dark",spacing:!0},u.a.createElement("strong",null,i.props.name)," is hidden"),u.a.createElement(p.a.Text,{spacingTop:!0},u.a.createElement(p.a.Button,{className:"DangerZone__delete",onClick:function(){return i.handleRevertButtonClick()},type:"secondary"},"Bring back")))},i.state={deleteNameMatch:null,deleteNameMatchStatus:null},i}return Object(i.a)(a,[{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement(p.a.Segment,{className:"DangerZone",type:"negative"},this.props.is_hidden?this._renderRevertContent():this._renderDeleteContent()))}}]),a}(u.a.Component);t.a=m},790:function(e,t,a){"use strict";var n=a(1),r=a(4),c=a(20),i=a(21),s=a(23),l=a(22),o=(a(791),a(0)),u=a.n(o),p=a(43),m=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var i;return Object(c.a)(this,a),(i=t.call(this,e)).getForm=function(){return Object(r.a)({},i.state)},i.handleInputChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=e.target.value,r=e.target.name;i.setState(Object(n.a)({},r,a),function(){t&&t(e)})},i.parseParameter=function(e){if(null==e)return[];for(var t=e.split(" ").filter(function(e){return""!==e}),a=0;a<t.length;a++)t[a].startsWith("--")&&a+1<t.length&&(t[a]=t[a].concat(" ",t[a+1]));for(var n=t.filter(function(e){return e.includes("-")}),r=0,c=0;c<n.length;c++){var i=n[c].length;n[c]={value:n[c],start:r,end:r+i+1,index:c},r+=i+1}return n},i.parseEV=function(e){if(null==e)return[];for(var t=e.split(" ").filter(function(e){return""!==e}),a=0,n=0;n<t.length;n++){var r=t[n].length;t[n]={value:t[n],start:a,end:a+r+1,index:n},a+=r+1}return t},i.appendParameters=function(e){i.setState({parameterLists:i.parseParameter(i.state.parameter)})},i.appendEV=function(e){i.setState({environmentVariableLists:i.parseEV(i.state.environmentVariable)})},i.parseInputToTag=function(e){return e.startsWith("--")?e.substring(2).replace(" ",": "):e.startsWith("-")?e.substring(1):void 0},i.removeTag=function(e,t,a){var r,c=e.end-e.start;i.setState((r={},Object(n.a)(r,a,i.state[a].filter(function(t){return t!==e}).map(function(t,a){return a>=e.index?{value:t.value,start:t.start-c,end:t.end-c,index:t.index-1}:t})),Object(n.a)(r,t,i.state[t].substring(0,e.start)+i.state[t].substring(e.end)),r))},i.selectTag=function(e,t){t.current.setSelectionRange(e.start,e.end),t.current.focus()},i.state={name:i.props.name,parameter:i.props.parameter,environmentVariable:i.props.environmentVariable,scriptPath:i.props.scriptPath,interpreterPath:i.props.interpreterPath,workingDir:i.props.workingDir,aimExperiment:i.props.aimExperiment,aimIntegrate:i.props.aimIntegrate,parameterLists:[],environmentVariableLists:[]},i.parameterInputRef=u.a.createRef(),i.evInputRef=u.a.createRef(),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.appendEV(null),this.appendParameters(null)}},{key:"render",value:function(){var e=this,t=this.state.parameterLists.map(function(t){return u.a.createElement(p.a.Label,{key:t.value,onClick:function(){return e.selectTag(t,e.parameterInputRef)}},e.parseInputToTag(t.value),u.a.createElement("div",{className:"ExecutableViewForm__FormGroup__icon__wrapper",onClick:function(){return e.removeTag(t,"parameter","parameterLists")}},u.a.createElement(p.a.Icon,{i:"delete",className:"ExecutableViewForm__FormGroup__icon"})))}),a=this.state.environmentVariableLists.map(function(t){return u.a.createElement(p.a.Label,{key:t.value,onClick:function(){return e.selectTag(t,e.evInputRef)}},t.value,u.a.createElement("div",{className:"ExecutableViewForm__FormGroup__icon__wrapper",onClick:function(){return e.removeTag(t,"environmentVariable","environmentVariableLists")}},u.a.createElement(p.a.Icon,{i:"delete",className:"ExecutableViewForm__FormGroup__icon"})))}),n=this.state.parameterLists.length>0?u.a.createElement("div",{className:"ExecutableViewForm__FormGroup__row"},t):null,r=this.state.environmentVariableLists.length>0?u.a.createElement("div",{className:"ExecutableViewForm__FormGroup__row"},a):null;return u.a.createElement(u.a.Fragment,null,!this.props.processForm&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"ExecutableViewForm__FormGroup"},u.a.createElement(p.a.Input,{onChange:this.handleInputChange,name:"name",value:this.state.name,label:"Name",placeholder:"Name"})),u.a.createElement(p.a.Line,null)),u.a.createElement("div",{className:"ExecutableViewForm__FormGroup"},u.a.createElement(p.a.Text,{type:"grey",spacing:!0},"Python Command"),!this.props.processForm&&u.a.createElement(p.a.Input,{onChange:this.handleInputChange,name:"scriptPath",value:this.state.scriptPath,label:"Script path",placeholder:"train.py"}),u.a.createElement("div",null,u.a.createElement(p.a.Input,{id:"parameterInput",reference:this.parameterInputRef,onChange:function(t){return e.handleInputChange(t,e.appendParameters)},name:"parameter",value:this.state.parameter,label:"Arguments",placeholder:"--batch_size 32 --dropout 0.5"}),n)),u.a.createElement(p.a.Line,null),u.a.createElement("div",{className:"ExecutableViewForm__FormGroup"},u.a.createElement(p.a.Text,{type:"grey",spacing:!0},"Environment"),!this.props.processForm&&u.a.createElement(p.a.Input,{onChange:this.handleInputChange,name:"interpreterPath",value:this.state.interpreterPath,label:"Python interpreter path",placeholder:"/usr/local/bin/python3"}),u.a.createElement("div",null,u.a.createElement(p.a.Input,{id:"evInput",reference:this.evInputRef,onChange:function(t){return e.handleInputChange(t,e.appendEV)},name:"environmentVariable",value:this.state.environmentVariable,label:"Environment variables",placeholder:"CUDA_VISIBLE_DEVICES=0"}),r),!this.props.processForm&&u.a.createElement(p.a.Input,{onChange:this.handleInputChange,name:"workingDir",value:this.state.workingDir,label:"Working directory full path",placeholder:"/workspace"})),u.a.createElement(p.a.Line,null),u.a.createElement("div",{className:"ExecutableViewForm__FormGroup"},u.a.createElement(p.a.Text,{type:"grey",spacing:!0},"Integrate with aim"),u.a.createElement(p.a.Input,{onChange:this.handleInputChange,name:"aimExperiment",value:this.state.aimExperiment,label:"Experiment name",placeholder:"default"})))}}]),a}(o.Component);m.defaultProps={name:"",parameter:"",environmentVariable:"",scriptPath:"",interpreterPath:"",workingDir:"",aimExperiment:"",aimIntegrate:!0,processForm:!1},t.a=m},791:function(e,t,a){},845:function(e,t,a){},856:function(e,t,a){"use strict";a.r(t);var n=a(4),r=a(20),c=a(21),i=a(23),s=a(22),l=(a(845),a(0)),o=a.n(l),u=a(59),p=a(43),m=a(16),d=a(15),h=a(121),b=a(790),v=a(769),g=a(19),f=a(772),E=function(e){Object(i.a)(a,e);var t=Object(s.a)(a);function a(e){var c;return Object(r.a)(this,a),(c=t.call(this,e)).getExecutable=function(){c.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{isLoading:!0})});var e=c.props.match.params.executable_id;c.props.getExecutable(e).then(function(e){c.setState(function(t){return Object(n.a)(Object(n.a)({},t),{},{executableParams:{name:e.name,scriptPath:e.script_path,parameter:e.arguments,environmentVariable:e.env_vars,interpreterPath:e.interpreter_path,workingDir:e.working_dir,aimExperiment:e.aim_experiment,is_hidden:e.is_hidden},processes:e.processes})})}).finally(function(){c.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{isLoading:!1})})})},c.handleSaveBtnClick=function(){if(c.form){var e=c.form.current.getForm();c.setState({saveBtn:{loading:!0,disabled:!0}});var t=c.props.match.params.executable_id;c.props.saveExecutable(t,{name:e.name,script_path:e.scriptPath,arguments:e.parameter,env_vars:e.environmentVariable,interpreter_path:e.interpreterPath,working_dir:e.workingDir,aim_experiment:e.aimExperiment}).then(function(e){c.getExecutable()}).catch(function(e){}).finally(function(){c.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{saveBtn:{loading:!1,disabled:!1}})})})}},c.handleExecuteBtnClick=function(){if(c.form){var e=c.form.current.getForm();c.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{executeBtn:Object(n.a)(Object(n.a)({},e.executeBtn),{},{loading:!0,disabled:!0})})});var t=c.props.match.params.executable_id;c.props.executeExecutableForm(t,{name:e.name,script_path:e.scriptPath,arguments:e.parameter,env_vars:e.environmentVariable,interpreter_path:e.interpreterPath,working_dir:e.workingDir,aim_experiment:e.aimExperiment}).then(function(){c.getExecutable(),c.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{activeTab:"processes"})})}).finally(function(){c.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{executeBtn:Object(n.a)(Object(n.a)({},e.executeBtn),{},{loading:!1,disabled:!1})})})})}},c.setHiddenStatus=function(e,t){c.props.hideExecutable(e,{is_hidden:t}).then(function(e){c.setState(function(e){return Object(n.a)(Object(n.a)({},e),{},{executableParams:Object(n.a)(Object(n.a)({},e.executableParams),{},{is_hidden:t})})})})},c._renderSettings=function(){return o.a.createElement("div",null,o.a.createElement(p.a.Text,{className:"HubExecutableDetailScreen__settings__title",type:"negative",size:6},"Danger Zone"),o.a.createElement(f.a,{message:"Hide this process template from the main page",name:c.state.executableParams.name,is_hidden:c.state.executableParams.is_hidden,onDelete:function(){return c.setHiddenStatus(c.props.match.params.executable_id,!0)},onRevert:function(){return c.setHiddenStatus(c.props.match.params.executable_id,!1)}}))},c._renderTemplate=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,Object.assign({ref:c.form},c.state.executableParams)),o.a.createElement(p.a.Buttons,null,o.a.createElement(p.a.Button,Object.assign({onClick:function(){return c.handleSaveBtnClick()},type:"primary"},c.state.saveBtn),"Save")))},c._renderExecForm=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a.Text,{left:!0,spacingTop:!0},o.a.createElement(p.a.Button,Object.assign({onClick:function(){return c.handleExecuteBtnClick()},type:"positive",inline:!0},c.state.executeBtn),"Execute now")),o.a.createElement(p.a.Line,null),o.a.createElement(b.a,Object.assign({ref:c.form},c.state.executableParams,{processForm:!0})))},c._renderProcesses=function(){return o.a.createElement("div",{className:"HubExecutableDetailScreen__processes"},!!c.state.processes&&o.a.createElement(p.a.List,null,c.state.processes.map(function(e,t){return o.a.createElement(p.a.ListItem,{key:t,className:"HubExecutableDetailScreen__processes__item"},o.a.createElement(u.b,{to:Object(g.d)(d.k,{process_id:e.id})},"PID: ",e.pid),!!e.arguments&&o.a.createElement(p.a.Text,{type:"grey",small:!0},"Arguments: ",e.arguments),!!e.env_vars&&o.a.createElement(p.a.Text,{type:"grey",small:!0},"Environment variables: ",e.env_vars))})),(!c.state.processes||0===c.state.processes.length)&&o.a.createElement(p.a.Text,{type:"grey",center:!0},"Empty"))},c._renderContent=function(){return c.state.isLoading?o.a.createElement(p.a.Text,{type:"grey",center:!0},"Loading.."):o.a.createElement("div",{className:"HubExecutableDetailScreen__FormGroup__wrapper"},o.a.createElement(p.a.Text,{className:"HubExecutableDetailScreen__name",size:6,header:!0,spacing:!0},o.a.createElement(u.b,{to:Object(g.d)(d.i,{})},"Processes"),o.a.createElement(p.a.Text,{type:"grey",inline:!0}," ","/ ",c.state.executableParams.name)),o.a.createElement(p.a.Tabs,{leftItems:o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a.Tab,{className:"",active:"processes"===c.state.activeTab,onClick:function(){return c.setState({activeTab:"processes"})}},"History"),o.a.createElement(p.a.Tab,{className:"",active:"new_process"===c.state.activeTab,onClick:function(){return c.setState({activeTab:"new_process"})}},"Execute"),o.a.createElement(p.a.Tab,{className:"",active:"template"===c.state.activeTab,onClick:function(){return c.setState({activeTab:"template"})}},"Template"),o.a.createElement(p.a.Tab,{className:"",active:"settings"===c.state.activeTab,onClick:function(){return c.setState({activeTab:"settings"})}},"Settings"))}),o.a.createElement("div",null,"processes"===c.state.activeTab&&c._renderProcesses(),"new_process"===c.state.activeTab&&c._renderExecForm(),"template"===c.state.activeTab&&c._renderTemplate(),"settings"===c.state.activeTab&&c._renderSettings()))},c.state={isLoading:!0,activeTab:"processes",executableParams:{},processes:[],saveBtn:{loading:!1,disabled:!1},executeBtn:{loading:!1,disabled:!1}},c.form=o.a.createRef(),c}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getExecutable()}},{key:"render",value:function(){return o.a.createElement(v.a,null,o.a.createElement(p.a.Container,{size:"small"},this._renderContent()))}}]),a}(o.a.Component);t.default=h.a(m.k,E)}}]);