{"version":3,"file":"chunks/app_views_settings_account_accountIdentities_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"2ZAQe,MAAMA,UAGXC,EAAAA,EACRC,WACE,MAAO,GAGTC,SACE,MAAMC,EAAQC,KAAKH,WACnB,OACE,QAAC,IAAD,CAAeE,MAAK,UAAKA,EAAQ,GAAH,OAAMA,EAAN,OAAmB,GAA7B,UAApB,SACGC,KAAKC,qBAZON,EAAAA,YAAAA,a,msBCYrB,MAAMO,UAA0BP,EAAAA,EAAwB,+DAgBlCQ,IAClB,MAAM,WAACC,GAAcJ,KAAKK,MAE1BL,KAAKM,UACHD,IAAS,MACP,MAAME,EAAa,UAAGF,EAAMD,kBAAT,aAAG,EAAkBI,QAAO,EAAEC,GAAAA,KAAQA,IAAON,EAASM,KAEzE,MAAO,CACLL,WAAYG,MAAAA,EAAAA,EAAiB,OAGjC,KACEG,EAAAA,EAAAA,IAAmBP,GAAUQ,OAAM,KACjCX,KAAKM,SAAS,CACZF,WAAAA,YA7BVQ,kBACE,MAAO,IACFC,MAAMD,kBACTR,WAAY,IAIhBU,eACE,MAAO,CAAC,CAAC,aAjBI,iCAoBfjB,WACE,OAAOkB,EAAAA,EAAAA,GAAE,cAuBXC,aAAa,MACX,OACE,0BACE,QAAC,IAAD,CAAoBjB,MAAM,gBAC1B,QAAC,KAAD,YACE,QAAC,KAAD,WAAcgB,EAAAA,EAAAA,GAAE,iBAChB,QAAC,IAAD,UACG,UAACf,KAAKK,MAAMD,kBAAZ,OAAC,EAAuBa,OAKvBjB,KAAKK,MAAMD,WAAWc,KAAIf,IACxB,QAACgB,EAAD,YACE,wBAAMhB,EAASiB,iBAEf,QAAC,KAAD,CACEC,KAAK,QACLC,QAAStB,KAAKuB,iBAAiBC,KAAKxB,KAAMG,GAF5C,UAIGY,EAAAA,EAAAA,GAAE,kBAPiBZ,EAASM,OALnC,QAAC,IAAD,WACGM,EAAAA,EAAAA,GAAE,mEAuBnB,MAAMI,GAAoB,OAAOM,EAAAA,GAAP,sBAAH,4EAKvB","sources":["webpack:///./app/views/asyncView.tsx","webpack:///./app/views/settings/account/accountIdentities.tsx"],"sourcesContent":["import * as React from 'react';\nimport DocumentTitle from 'react-document-title';\n\nimport AsyncComponent from 'app/components/asyncComponent';\n\ntype AsyncViewState = AsyncComponent['state'];\ntype AsyncViewProps = AsyncComponent['props'];\n\nexport default class AsyncView<\n  P extends AsyncViewProps = AsyncViewProps,\n  S extends AsyncViewState = AsyncViewState\n> extends AsyncComponent<P, S> {\n  getTitle() {\n    return '';\n  }\n\n  render() {\n    const title = this.getTitle();\n    return (\n      <DocumentTitle title={`${title ? `${title} - ` : ''}Sentry`}>\n        {this.renderComponent() as React.ReactChild}\n      </DocumentTitle>\n    );\n  }\n}\n","import {RouteComponentProps} from 'react-router';\nimport styled from '@emotion/styled';\n\nimport {disconnectIdentity} from 'app/actionCreators/account';\nimport Button from 'app/components/button';\nimport {Panel, PanelBody, PanelHeader, PanelItem} from 'app/components/panels';\nimport {t} from 'app/locale';\nimport {Identity} from 'app/types';\nimport AsyncView from 'app/views/asyncView';\nimport EmptyMessage from 'app/views/settings/components/emptyMessage';\nimport SettingsPageHeader from 'app/views/settings/components/settingsPageHeader';\n\nconst ENDPOINT = '/users/me/social-identities/';\n\ntype Props = RouteComponentProps<{}, {}>;\n\ntype State = {\n  identities: Identity[] | null;\n} & AsyncView['state'];\n\nclass AccountIdentities extends AsyncView<Props, State> {\n  getDefaultState() {\n    return {\n      ...super.getDefaultState(),\n      identities: [],\n    };\n  }\n\n  getEndpoints(): ReturnType<AsyncView['getEndpoints']> {\n    return [['identities', ENDPOINT]];\n  }\n\n  getTitle() {\n    return t('Identities');\n  }\n\n  handleDisconnect = (identity: Identity) => {\n    const {identities} = this.state;\n\n    this.setState(\n      state => {\n        const newIdentities = state.identities?.filter(({id}) => id !== identity.id);\n\n        return {\n          identities: newIdentities ?? [],\n        };\n      },\n      () =>\n        disconnectIdentity(identity).catch(() => {\n          this.setState({\n            identities,\n          });\n        })\n    );\n  };\n\n  renderBody() {\n    return (\n      <div>\n        <SettingsPageHeader title=\"Identities\" />\n        <Panel>\n          <PanelHeader>{t('Identities')}</PanelHeader>\n          <PanelBody>\n            {!this.state.identities?.length ? (\n              <EmptyMessage>\n                {t('There are no identities associated with this account')}\n              </EmptyMessage>\n            ) : (\n              this.state.identities.map(identity => (\n                <IdentityPanelItem key={identity.id}>\n                  <div>{identity.providerLabel}</div>\n\n                  <Button\n                    size=\"small\"\n                    onClick={this.handleDisconnect.bind(this, identity)}\n                  >\n                    {t('Disconnect')}\n                  </Button>\n                </IdentityPanelItem>\n              ))\n            )}\n          </PanelBody>\n        </Panel>\n      </div>\n    );\n  }\n}\n\nconst IdentityPanelItem = styled(PanelItem)`\n  align-items: center;\n  justify-content: space-between;\n`;\n\nexport default AccountIdentities;\n"],"names":["AsyncView","AsyncComponent","getTitle","render","title","this","renderComponent","AccountIdentities","identity","identities","state","setState","newIdentities","filter","id","disconnectIdentity","catch","getDefaultState","super","getEndpoints","t","renderBody","length","map","IdentityPanelItem","providerLabel","size","onClick","handleDisconnect","bind","PanelItem"],"sourceRoot":""}