{"version":3,"file":"chunks/app_components_modals_diffModal_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/events/interfaces/frame/utils.tsx","webpack:///./app/components/events/interfaces/rawStacktraceContent.tsx","webpack:///./app/components/events/interfaces/types.tsx","webpack:///./app/components/issueDiff/renderGroupingInfo.tsx","webpack:///./app/components/issueDiff/index.tsx","webpack:///./app/components/modals/diffModal.tsx","webpack:///./app/utils/getStacktraceBody.tsx","webpack:///./app/utils/useApi.tsx","webpack:///./app/utils/withApi.tsx"],"sourcesContent":["import {SymbolicatorStatus} from 'app/components/events/interfaces/types';\nimport {IconQuestion, IconWarning} from 'app/icons';\nimport {t} from 'app/locale';\nimport {Frame, PlatformType} from 'app/types';\nimport {defined, objectIsEmpty} from 'app/utils';\n\nexport function trimPackage(pkg: string) {\n  const pieces = pkg.split(/^([a-z]:\\\\|\\\\\\\\)/i.test(pkg) ? '\\\\' : '/');\n  const filename = pieces[pieces.length - 1] || pieces[pieces.length - 2] || pkg;\n  return filename.replace(/\\.(dylib|so|a|dll|exe)$/, '');\n}\n\nexport function getPlatform(dataPlatform: PlatformType | null, platform: string) {\n  // prioritize the frame platform but fall back to the platform\n  // of the stack trace / exception\n  return dataPlatform || platform;\n}\n\nexport function getFrameHint(frame: Frame) {\n  // returning [hintText, hintIcon]\n  const {symbolicatorStatus} = frame;\n  const func = frame.function || '<unknown>';\n  // Custom color used to match adjacent text.\n  const warningIcon = <IconQuestion size=\"xs\" color={'#2c45a8' as any} />;\n  const errorIcon = <IconWarning size=\"xs\" color=\"red300\" />;\n\n  if (func.match(/^@objc\\s/)) {\n    return [t('Objective-C -> Swift shim frame'), warningIcon];\n  }\n  if (func.match(/^__?hidden#\\d+/)) {\n    return [t('Hidden function from bitcode build'), errorIcon];\n  }\n  if (!symbolicatorStatus && func === '<unknown>') {\n    // Only render this if the event was not symbolicated.\n    return [t('No function name was supplied by the client SDK.'), warningIcon];\n  }\n\n  if (\n    func === '<unknown>' ||\n    (func === '<redacted>' && symbolicatorStatus === SymbolicatorStatus.MISSING_SYMBOL)\n  ) {\n    switch (symbolicatorStatus) {\n      case SymbolicatorStatus.MISSING_SYMBOL:\n        return [t('The symbol was not found within the debug file.'), warningIcon];\n      case SymbolicatorStatus.UNKNOWN_IMAGE:\n        return [t('No image is specified for the address of the frame.'), warningIcon];\n      case SymbolicatorStatus.MISSING:\n        return [\n          t('The debug file could not be retrieved from any of the sources.'),\n          errorIcon,\n        ];\n      case SymbolicatorStatus.MALFORMED:\n        return [t('The retrieved debug file could not be processed.'), errorIcon];\n      default:\n    }\n  }\n\n  if (func === '<redacted>') {\n    return [t('Unknown system frame. Usually from beta SDKs'), warningIcon];\n  }\n\n  return [null, null];\n}\n\nexport function isDotnet(platform: string) {\n  // csharp platform represents .NET and can be F#, VB or any language targeting CLS (the Common Language Specification)\n  return platform === 'csharp';\n}\n\nexport function hasContextSource(frame: Frame) {\n  return defined(frame.context) && !!frame.context.length;\n}\n\nexport function hasContextVars(frame: Frame) {\n  return !objectIsEmpty(frame.vars || {});\n}\n\nexport function hasContextRegisters(registers: Record<string, string>) {\n  return !objectIsEmpty(registers);\n}\n\nexport function hasAssembly(frame: Frame, platform?: string) {\n  return (\n    isDotnet(getPlatform(frame.platform, platform ?? 'other')) && defined(frame.package)\n  );\n}\n\nexport function isExpandable({\n  frame,\n  registers,\n  emptySourceNotation,\n  platform,\n  isOnlyFrame,\n}: {\n  frame: Frame;\n  registers: Record<string, string>;\n  emptySourceNotation?: boolean;\n  platform?: string;\n  isOnlyFrame?: boolean;\n}) {\n  return (\n    (!isOnlyFrame && emptySourceNotation) ||\n    hasContextSource(frame) ||\n    hasContextVars(frame) ||\n    hasContextRegisters(registers) ||\n    hasAssembly(frame, platform)\n  );\n}\n","import {trimPackage} from 'app/components/events/interfaces/frame/utils';\nimport {ExceptionValue, Frame} from 'app/types';\nimport {StacktraceType} from 'app/types/stacktrace';\nimport {defined, trim} from 'app/utils';\n\nfunction getJavaScriptFrame(frame: Frame): string {\n  let result = '';\n  if (defined(frame.function)) {\n    result += '  at ' + frame.function + '(';\n  } else {\n    result += '  at ? (';\n  }\n  if (defined(frame.filename)) {\n    result += frame.filename;\n  } else if (defined(frame.module)) {\n    result += frame.module;\n  }\n  if (defined(frame.lineNo) && frame.lineNo >= 0) {\n    result += ':' + frame.lineNo;\n  }\n  if (defined(frame.colNo) && frame.colNo >= 0) {\n    result += ':' + frame.colNo;\n  }\n  result += ')';\n  return result;\n}\n\nfunction getRubyFrame(frame: Frame): string {\n  let result = '  from ';\n  if (defined(frame.filename)) {\n    result += frame.filename;\n  } else if (defined(frame.module)) {\n    result += '(' + frame.module + ')';\n  } else {\n    result += '?';\n  }\n  if (defined(frame.lineNo) && frame.lineNo >= 0) {\n    result += ':' + frame.lineNo;\n  }\n  if (defined(frame.colNo) && frame.colNo >= 0) {\n    result += ':' + frame.colNo;\n  }\n  if (defined(frame.function)) {\n    result += ':in `' + frame.function + \"'\";\n  }\n  return result;\n}\n\nexport function getPHPFrame(frame: Frame, idx: number): string {\n  const funcName = frame.function === 'null' ? '{main}' : frame.function;\n  return `#${idx} ${frame.filename || frame.module}(${frame.lineNo}): ${funcName}`;\n}\n\nexport function getPythonFrame(frame: Frame): string {\n  let result = '';\n  if (defined(frame.filename)) {\n    result += '  File \"' + frame.filename + '\"';\n  } else if (defined(frame.module)) {\n    result += '  Module \"' + frame.module + '\"';\n  } else {\n    result += '  ?';\n  }\n  if (defined(frame.lineNo) && frame.lineNo >= 0) {\n    result += ', line ' + frame.lineNo;\n  }\n  if (defined(frame.colNo) && frame.colNo >= 0) {\n    result += ', col ' + frame.colNo;\n  }\n  if (defined(frame.function)) {\n    result += ', in ' + frame.function;\n  }\n  if (defined(frame.context)) {\n    frame.context.forEach(item => {\n      if (item[0] === frame.lineNo) {\n        result += '\\n    ' + trim(item[1]);\n      }\n    });\n  }\n  return result;\n}\n\nexport function getJavaFrame(frame: Frame): string {\n  let result = '    at';\n  if (defined(frame.module)) {\n    result += ' ' + frame.module + '.';\n  }\n  if (defined(frame.function)) {\n    result += frame.function;\n  }\n  if (defined(frame.filename)) {\n    result += '(' + frame.filename;\n    if (defined(frame.lineNo) && frame.lineNo >= 0) {\n      result += ':' + frame.lineNo;\n    }\n    result += ')';\n  }\n  return result;\n}\n\nfunction ljust(str: string, len: number) {\n  return str + Array(Math.max(0, len - str.length) + 1).join(' ');\n}\n\nexport function getNativeFrame(frame: Frame): string {\n  let result = '  ';\n  if (defined(frame.package)) {\n    result += ljust(trimPackage(frame.package), 20);\n  }\n  if (defined(frame.instructionAddr)) {\n    result += ljust(frame.instructionAddr, 12);\n  }\n  result += ' ' + (frame.function || frame.symbolAddr);\n  if (defined(frame.filename)) {\n    result += ' (' + frame.filename;\n    if (defined(frame.lineNo) && frame.lineNo >= 0) {\n      result += ':' + frame.lineNo;\n    }\n    result += ')';\n  }\n  return result;\n}\n\nexport function getJavaPreamble(exception: ExceptionValue): string {\n  let result = `${exception.type}: ${exception.value}`;\n  if (exception.module) {\n    result = `${exception.module}.${result}`;\n  }\n  return result;\n}\n\nfunction getPreamble(exception: ExceptionValue, platform: string | undefined): string {\n  switch (platform) {\n    case 'java':\n      return getJavaPreamble(exception);\n    default:\n      return exception.type + ': ' + exception.value;\n  }\n}\n\nfunction getFrame(frame: Frame, frameIdx: number, platform: string | undefined): string {\n  if (frame.platform) {\n    platform = frame.platform;\n  }\n  switch (platform) {\n    case 'javascript':\n      return getJavaScriptFrame(frame);\n    case 'ruby':\n      return getRubyFrame(frame);\n    case 'php':\n      return getPHPFrame(frame, frameIdx);\n    case 'python':\n      return getPythonFrame(frame);\n    case 'java':\n      return getJavaFrame(frame);\n    case 'objc':\n    // fallthrough\n    case 'cocoa':\n    // fallthrough\n    case 'native':\n      return getNativeFrame(frame);\n    default:\n      return getPythonFrame(frame);\n  }\n}\n\nexport default function render(\n  data: StacktraceType,\n  platform?: string,\n  exception?: ExceptionValue\n) {\n  const frames: string[] = [];\n\n  (data?.frames ?? []).forEach((frame, frameIdx) => {\n    frames.push(getFrame(frame, frameIdx, platform));\n  });\n\n  if (platform !== 'python') {\n    frames.reverse();\n  }\n\n  if (exception) {\n    frames.unshift(getPreamble(exception, platform));\n  }\n\n  return frames.join('\\n');\n}\n","export enum SymbolicatorStatus {\n  SYMBOLICATED = 'symbolicated',\n  MISSING_SYMBOL = 'missing_symbol',\n  UNKNOWN_IMAGE = 'unknown_image',\n  MISSING = 'missing',\n  MALFORMED = 'malformed',\n}\n","import {t} from 'app/locale';\nimport {EventGroupComponent, EventGroupInfo, EventGroupVariant} from 'app/types';\n\nfunction renderGroupingInfo(groupingInfo: EventGroupInfo): string[] {\n  return Object.values(groupingInfo).map(renderGroupVariant).flat();\n}\n\nfunction renderGroupVariant(variant: EventGroupVariant): string[] {\n  const title = [t('Type: %s', variant.type)];\n\n  if (variant.hash) {\n    title.push(t('Hash: %s', variant.hash));\n  }\n\n  if (variant.description) {\n    title.push(t('Description: %s', variant.description));\n  }\n\n  const rv = [title.join('\\n')];\n\n  if (variant.component) {\n    rv.push(renderComponent(variant.component).join('\\n'));\n  }\n\n  return rv;\n}\n\nfunction renderComponent(component: EventGroupComponent): string[] {\n  if (!component.contributes) {\n    return [];\n  }\n\n  const {name, id, hint} = component;\n  const name_or_id = name || id;\n  const title = name_or_id && hint ? `${name_or_id} (${hint})` : name_or_id;\n  const rv = title ? [title] : [];\n\n  if (component.values) {\n    for (const value of component.values) {\n      if (typeof value === 'string') {\n        rv.push(`  ${value}`);\n        continue;\n      }\n\n      for (const line of renderComponent(value)) {\n        rv.push(`  ${line}`);\n      }\n    }\n  }\n\n  return rv;\n}\n\nexport default renderGroupingInfo;\n","import {Component} from 'react';\nimport isPropValid from '@emotion/is-prop-valid';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage} from 'app/actionCreators/indicator';\nimport {Client} from 'app/api';\nimport Button from 'app/components/button';\nimport ButtonBar from 'app/components/buttonBar';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport SplitDiff from 'app/components/splitDiff';\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {Project} from 'app/types';\nimport getStacktraceBody from 'app/utils/getStacktraceBody';\nimport withApi from 'app/utils/withApi';\n\nimport renderGroupingInfo from './renderGroupingInfo';\n\nconst defaultProps = {\n  baseEventId: 'latest',\n  targetEventId: 'latest',\n};\n\ntype DefaultProps = typeof defaultProps;\n\ntype Props = {\n  api: Client;\n  baseIssueId: string;\n  targetIssueId: string;\n  orgId: string;\n  project: Project;\n  baseEventId?: string;\n  targetEventId?: string;\n  className?: string;\n};\n\ntype State = {\n  loading: boolean;\n  groupingDiff: boolean;\n  baseEvent: Array<string>;\n  targetEvent: Array<string>;\n  SplitDiffAsync?: typeof SplitDiff;\n};\n\nclass IssueDiff extends Component<Props, State> {\n  static defaultProps: DefaultProps = defaultProps;\n\n  state: State = {\n    loading: true,\n    groupingDiff: false,\n    baseEvent: [],\n    targetEvent: [],\n\n    // `SplitDiffAsync` is an async-loaded component\n    // This will eventually contain a reference to the exported component from `./splitDiff`\n    SplitDiffAsync: undefined,\n  };\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  fetchData() {\n    const {baseIssueId, targetIssueId, baseEventId, targetEventId} = this.props;\n\n    // Fetch component and event data\n    Promise.all([\n      import('../splitDiff'),\n      this.fetchEventData(baseIssueId, baseEventId ?? 'latest'),\n      this.fetchEventData(targetIssueId, targetEventId ?? 'latest'),\n    ])\n      .then(([{default: SplitDiffAsync}, baseEvent, targetEvent]) => {\n        this.setState({\n          SplitDiffAsync,\n          baseEvent,\n          targetEvent,\n          loading: false,\n        });\n      })\n      .catch(() => {\n        addErrorMessage(t('Error loading events'));\n      });\n  }\n\n  toggleDiffMode = () => {\n    this.setState(\n      state => ({groupingDiff: !state.groupingDiff, loading: true}),\n      this.fetchData\n    );\n  };\n\n  fetchEventData = async (issueId: string, eventId: string) => {\n    const {orgId, project, api} = this.props;\n    const {groupingDiff} = this.state;\n\n    let paramEventId = eventId;\n\n    if (eventId === 'latest') {\n      const event = await api.requestPromise(`/issues/${issueId}/events/latest/`);\n      paramEventId = event.eventID;\n    }\n\n    if (groupingDiff) {\n      const groupingInfo = await api.requestPromise(\n        `/projects/${orgId}/${project.slug}/events/${paramEventId}/grouping-info/`\n      );\n      return renderGroupingInfo(groupingInfo);\n    }\n\n    const event = await api.requestPromise(\n      `/projects/${orgId}/${project.slug}/events/${paramEventId}/`\n    );\n    return getStacktraceBody(event);\n  };\n\n  render() {\n    const {className, project} = this.props;\n    const {\n      SplitDiffAsync: DiffComponent,\n      loading,\n      groupingDiff,\n      baseEvent,\n      targetEvent,\n    } = this.state;\n\n    const showDiffToggle = project.features.includes('similarity-view-v2');\n\n    return (\n      <StyledIssueDiff className={className} loading={loading}>\n        {loading && <LoadingIndicator />}\n        {!loading && showDiffToggle && (\n          <HeaderWrapper>\n            <ButtonBar merged active={groupingDiff ? 'grouping' : 'event'}>\n              <Button barId=\"event\" size=\"small\" onClick={this.toggleDiffMode}>\n                {t('Diff stack trace and message')}\n              </Button>\n              <Button barId=\"grouping\" size=\"small\" onClick={this.toggleDiffMode}>\n                {t('Diff grouping information')}\n              </Button>\n            </ButtonBar>\n          </HeaderWrapper>\n        )}\n        {!loading &&\n          DiffComponent &&\n          baseEvent.map((value, i) => (\n            <DiffComponent\n              key={i}\n              base={value}\n              target={targetEvent[i] ?? ''}\n              type=\"words\"\n            />\n          ))}\n      </StyledIssueDiff>\n    );\n  }\n}\n\nexport default withApi(IssueDiff);\n\n// required for tests which do not provide API as context\nexport {IssueDiff};\n\nconst StyledIssueDiff = styled('div', {\n  shouldForwardProp: p => typeof p === 'string' && isPropValid(p) && p !== 'loading',\n})<Pick<State, 'loading'>>`\n  background-color: ${p => p.theme.backgroundSecondary};\n  overflow: auto;\n  padding: ${space(1)};\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n\n  ${p =>\n    p.loading &&\n    `\n        background-color: ${p.theme.background};\n        justify-content: center;\n        align-items: center;\n      `};\n`;\n\nconst HeaderWrapper = styled('div')`\n  display: flex;\n  align-items: center;\n  margin-bottom: ${space(2)};\n`;\n","import * as React from 'react';\nimport {css} from '@emotion/react';\n\nimport {ModalRenderProps} from 'app/actionCreators/modal';\nimport IssueDiff from 'app/components/issueDiff';\n\ntype Props = ModalRenderProps & React.ComponentProps<typeof IssueDiff>;\n\nconst DiffModal = ({className, Body, CloseButton, ...props}: Props) => (\n  <Body>\n    <CloseButton />\n    <IssueDiff className={className} {...props} />\n  </Body>\n);\n\nconst modalCss = css`\n  position: absolute;\n  left: 20px;\n  right: 20px;\n  top: 20px;\n  bottom: 20px;\n  display: flex;\n  padding: 0;\n  width: auto;\n\n  [role='document'] {\n    overflow: scroll;\n    height: 100%;\n    display: flex;\n    flex: 1;\n  }\n\n  section {\n    display: flex;\n    width: 100%;\n  }\n`;\n\nexport {modalCss};\n\nexport default DiffModal;\n","import rawStacktraceContent from 'app/components/events/interfaces/rawStacktraceContent';\nimport {Event} from 'app/types/event';\n\nexport default function getStacktraceBody(event: Event) {\n  if (!event || !event.entries) {\n    return [];\n  }\n\n  // TODO(billyvg): This only accounts for the first exception, will need navigation to be able to\n  // diff multiple exceptions\n  //\n  // See: https://github.com/getsentry/sentry/issues/6055\n  const exc = event.entries.find(({type}) => type === 'exception');\n\n  if (!exc) {\n    // Look for a message if not an exception\n    const msg = event.entries.find(({type}) => type === 'message');\n    if (!msg) {\n      return [];\n    }\n    return msg?.data?.formatted && [msg.data.formatted];\n  }\n\n  if (!exc.data) {\n    return [];\n  }\n\n  // TODO(ts): This should be verified when EntryData has the correct type\n  return exc.data.values\n    .filter(value => !!value.stacktrace)\n    .map(value => rawStacktraceContent(value.stacktrace, event.platform, value))\n    .reduce((acc, value) => acc.concat(value), []);\n}\n","import {useEffect, useRef} from 'react';\n\nimport {Client} from 'app/api';\n\ntype Options = {\n  /**\n   * Enabling this option will disable clearing in-flight requests when the\n   * component is unmounted.\n   *\n   * This may be useful in situations where your component needs to finish up\n   * somewhere the client was passed into some type of action creator and the\n   * component is unmounted.\n   */\n  persistInFlight?: boolean;\n  /**\n   * An existing API client may be provided.\n   *\n   * This is a continent way to re-use clients and still inherit the\n   * persistInFlight configuration.\n   */\n  api?: Client;\n};\n\n/**\n * Returns an API client that will have it's requests canceled when the owning\n * React component is unmounted (may be disabled via options).\n */\nfunction useApi({persistInFlight, api: providedApi}: Options = {}) {\n  const localApi = useRef<Client>();\n\n  // Lazily construct the client if we weren't provided with one\n  if (localApi.current === undefined && providedApi === undefined) {\n    localApi.current = new Client();\n  }\n\n  // Use the provided client if available\n  const api = providedApi ?? localApi.current!;\n\n  function handleCleanup() {\n    !persistInFlight && api.clear();\n  }\n\n  useEffect(() => handleCleanup, []);\n\n  return api;\n}\n\nexport default useApi;\n","import {Client} from 'app/api';\nimport getDisplayName from 'app/utils/getDisplayName';\nimport useApi from 'app/utils/useApi';\n\ntype InjectedApiProps = {\n  api: Client;\n};\n\ntype WrappedProps<P> = Omit<P, keyof InjectedApiProps> & Partial<InjectedApiProps>;\n\n/**\n * XXX: Prefer useApi if you are wrapping a Function Component!\n *\n * React Higher-Order Component (HoC) that provides \"api\" client when mounted,\n * and clears API requests when component is unmounted.\n *\n * If an `api` prop is provided when the component is invoked it will be passed\n * through.\n */\nconst withApi = <P extends InjectedApiProps>(\n  WrappedComponent: React.ComponentType<P>,\n  options: Parameters<typeof useApi>[0] = {}\n) => {\n  const WithApi: React.FC<WrappedProps<P>> = ({api: propsApi, ...props}) => {\n    const api = useApi({api: propsApi, ...options});\n\n    return <WrappedComponent {...(props as P)} api={api} />;\n  };\n\n  WithApi.displayName = `withApi(${getDisplayName(WrappedComponent)})`;\n\n  return WithApi;\n};\n\nexport default withApi;\n"],"names":["trimPackage","pkg","pieces","split","test","length","replace","getPlatform","dataPlatform","platform","getFrameHint","frame","symbolicatorStatus","func","function","warningIcon","size","color","errorIcon","match","t","SymbolicatorStatus","isDotnet","hasContextSource","defined","context","hasContextVars","objectIsEmpty","vars","hasContextRegisters","registers","hasAssembly","package","isExpandable","emptySourceNotation","isOnlyFrame","getPythonFrame","result","filename","module","lineNo","colNo","forEach","item","trim","ljust","str","len","Array","Math","max","join","render","data","exception","frames","frameIdx","push","getJavaScriptFrame","getRubyFrame","idx","funcName","getPHPFrame","getJavaFrame","instructionAddr","symbolAddr","getNativeFrame","getFrame","reverse","unshift","type","value","getJavaPreamble","getPreamble","renderGroupVariant","variant","title","hash","description","rv","component","renderComponent","contributes","name","id","hint","name_or_id","values","line","IssueDiff","Component","loading","groupingDiff","baseEvent","targetEvent","SplitDiffAsync","undefined","this","setState","state","fetchData","async","issueId","eventId","orgId","project","api","props","paramEventId","requestPromise","eventID","groupingInfo","Object","map","flat","renderGroupingInfo","slug","event","getStacktraceBody","componentDidMount","baseIssueId","targetIssueId","baseEventId","targetEventId","Promise","all","fetchEventData","then","default","catch","addErrorMessage","className","DiffComponent","showDiffToggle","features","includes","StyledIssueDiff","HeaderWrapper","merged","active","barId","onClick","toggleDiffMode","i","base","target","withApi","shouldForwardProp","p","isPropValid","theme","backgroundSecondary","space","background","DiffModal","Body","CloseButton","modalCss","entries","exc","find","msg","formatted","filter","stacktrace","rawStacktraceContent","reduce","acc","concat","persistInFlight","providedApi","localApi","useRef","current","Client","handleCleanup","clear","useEffect","WrappedComponent","options","WithApi","propsApi","useApi","displayName","getDisplayName"],"sourceRoot":""}