"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_modals_createTeamModal_tsx"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{PX:()=>m,eM:()=>d,z_:()=>u,fs:()=>p,um:()=>l,s:()=>h,Cm:()=>g,tT:()=>f}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=s("./app/actionCreators/indicator.tsx"),o=s("./app/actions/teamActions.tsx"),r=s("./app/locale.tsx"),n=s("./app/utils/callIfFunction.tsx");if("app"==s.j)var c=s("./app/utils/guid.tsx");const i=(e={},t,...s)=>{(0,n.g)(e[t],...s)};async function m(e,t){const s=await e.requestPromise("/organizations/".concat(t.orgId,"/user-teams/"));o.Z.loadUserTeams(s)}function d(e,t,s){return o.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:e=>{o.Z.fetchDetailsSuccess(t.teamId,e),i(s,"success",e)},error:e=>{o.Z.fetchDetailsError(t.teamId,e),i(s,"error",e)}})}function u(e,t){o.Z.updateSuccess(e,t)}function p(e,t,s){const a="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return o.Z.update(t.teamId,t.data),e.request(a,{method:"PUT",data:t.data,success:e=>{u(t.teamId,e),i(s,"success",e)},error:e=>{o.Z.updateError(t.teamId,e),i(s,"error",e)}})}function l(e,t,s){var a;const r="/organizations/".concat(t.orgId,"/members/").concat(null!==(a=t.memberId)&&void 0!==a?a:"me","/teams/").concat(t.teamId,"/"),n=(0,c.E)();return o.Z.update(n,t.teamId),e.request(r,{method:"POST",success:e=>{o.Z.updateSuccess(t.teamId,e),i(s,"success",e)},error:e=>{o.Z.updateError(n,t.teamId,e),i(s,"error",e)}})}function h(e,t,s){const a="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),r=(0,c.E)();return o.Z.update(r,t.teamId),e.request(a,{method:"DELETE",success:e=>{o.Z.updateSuccess(t.teamId,e),i(s,"success",e)},error:e=>{o.Z.updateError(r,t.teamId,e),i(s,"error",e)}})}function g(e,t,s){return o.Z.createTeam(t),e.requestPromise("/organizations/".concat(s.orgId,"/teams/"),{method:"POST",data:t}).then((e=>(o.Z.createTeamSuccess(e),(0,a.S9)((0,r._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:s.orgId})),e)),(e=>{throw o.Z.createTeamError(t.slug,e),(0,a.Iw)((0,r._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:s.orgId})),e}))}function f(e,t){return o.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((e=>(o.Z.removeTeamSuccess(t.teamId,e),(0,a.S9)((0,r._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e)),(e=>{throw o.Z.removeTeamError(t.teamId,e),(0,a.Iw)((0,r._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/actions/teamActions.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var a=s("../node_modules/reflux/src/index.js");const o=s.n(a)().createActions(["createTeam","createTeamError","createTeamSuccess","fetchAll","fetchAllError","fetchAllSuccess","fetchDetails","fetchDetailsError","fetchDetailsSuccess","loadTeams","loadUserTeams","removeTeam","removeTeamError","removeTeamSuccess","update","updateError","updateSuccess"])},"./app/components/modals/createTeamModal.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/actionCreators/teams.tsx"),n=s("./app/components/teams/createTeamForm.tsx"),c=s("./app/locale.tsx"),i=s("./app/utils/withApi.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends o.Component{constructor(...e){super(...e),(0,a.Z)(this,"handleSubmit",((e,t,s)=>{const{organization:a,api:o}=this.props;(0,r.Cm)(o,e,{orgId:a.slug}).then((e=>{this.handleSuccess(e),t(e)})).catch((e=>{s(e)}))}))}handleSuccess(e){this.props.onClose&&this.props.onClose(e),this.props.closeModal()}render(){const{Body:e,Header:t,...s}=this.props;return(0,m.BX)(o.Fragment,{children:[(0,m.tZ)(t,{closeButton:!0,children:(0,c.t)("Create Team")}),(0,m.tZ)(e,{children:(0,m.tZ)(n.Z,{...s,onSubmit:this.handleSubmit})})]})}}d.displayName="CreateTeamModal";const u=(0,i.Z)(d)},"./app/components/teams/createTeamForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/locale.tsx"),n=s("./app/utils/callIfFunction.tsx"),c=s("./app/utils/slugify.tsx"),i=s("./app/views/settings/components/forms/form.tsx"),m=s("./app/views/settings/components/forms/textField.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends o.Component{constructor(...e){super(...e),(0,a.Z)(this,"handleSubmit",((e,t,s)=>{(0,n.g)(this.props.onSubmit,e,t,s)})),(0,a.Z)(this,"handleCreateTeamSuccess",(e=>{(0,n.g)(this.props.onSuccess,e)}))}render(){const{organization:e}=this.props;return(0,d.BX)(o.Fragment,{children:[(0,d.tZ)("p",{children:(0,r.t)("Members of a team have access to specific areas, such as a new release or a new application feature.")}),(0,d.tZ)(i.Z,{submitLabel:(0,r.t)("Create Team"),apiEndpoint:"/organizations/".concat(e.slug,"/teams/"),apiMethod:"POST",onSubmit:this.handleSubmit,onSubmitSuccess:this.handleCreateTeamSuccess,requireChanges:!0,"data-test-id":"create-team-form",...this.props.formProps,children:(0,d.tZ)(m.Z,{name:"slug",label:(0,r.t)("Team Name"),placeholder:(0,r.t)("e.g. operations, web-frontend, desktop"),help:(0,r.t)("May contain lowercase letters, numbers, dashes and underscores."),required:!0,stacked:!0,flexibleControlStateSize:!0,inline:!1,transformInput:c.Z})})]})}}u.displayName="CreateTeamForm"},"./app/utils/slugify.tsx":(e,t,s)=>{function a(e){return"string"==typeof e?e.toLowerCase().replace(" ","-"):""}s.d(t,{Z:()=>a}),s("../node_modules/core-js/modules/es.string.replace.js")},"./app/utils/useApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var a=s("../node_modules/react/index.js"),o=s("./app/api.tsx");const r=function({persistInFlight:e,api:t}={}){const s=(0,a.useRef)();void 0===s.current&&void 0===t&&(s.current=new o.KU);const r=null!=t?t:s.current;function n(){!e&&r.clear()}return(0,a.useEffect)((()=>n),[]),r}},"./app/utils/withApi.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var a=s("./app/utils/getDisplayName.tsx"),o=s("./app/utils/useApi.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=(e,t={})=>{const s=({api:s,...a})=>{const n=(0,o.Z)({api:s,...t});return(0,r.tZ)(e,{...a,api:n})};return s.displayName="withApi(".concat((0,a.Z)(e),")"),s}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_createTeamModal_tsx.3e6da806b7313612041ba6958c646d35.js.map