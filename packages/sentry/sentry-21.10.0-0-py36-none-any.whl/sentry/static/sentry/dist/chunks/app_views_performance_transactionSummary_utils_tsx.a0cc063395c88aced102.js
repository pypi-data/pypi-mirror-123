"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_transactionSummary_utils_tsx"],{"./app/components/events/interfaces/spans/utils.tsx":(t,e,n)=>{n.d(e,{IG:()=>S,n0:()=>v,TC:()=>g,hw:()=>_,ro:()=>y,Rr:()=>w,yk:()=>E,PA:()=>b,k9:()=>C,yn:()=>I,h_:()=>x,PC:()=>R,o0:()=>q,is:()=>j,vu:()=>A,rF:()=>P}),n("../node_modules/core-js/modules/es.symbol.description.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/lodash/isNumber.js"),s=n.n(a),i=n("../node_modules/lodash/isString.js"),o=n.n(i),p=n("../node_modules/lodash/set.js"),l=n.n(p),c=n("../node_modules/moment/moment.js"),u=n.n(c),m=n("./app/types/event.tsx"),d=n("./app/types/utils.tsx"),f=n("./app/utils/performance/vitals/constants.tsx");const h=t=>{const{startTimestamp:e,endTimestamp:n}=t;return e>n?{startTimestamp:n,endTimestamp:e}:t};let T;!function(t){t[t.Stable=0]="Stable",t[t.Reversed=1]="Reversed",t[t.Equal=2]="Equal"}(T||(T={}));const S=t=>{const{viewStart:e,viewEnd:n}=t,{startTimestamp:r,endTimestamp:a}=h({startTimestamp:t.traceStartTimestamp,endTimestamp:t.traceEndTimestamp}),s=a-r,i=r+e*s,o=a-(1-n)*s-i;return t=>{if(s<=0)return{type:"TRACE_TIMESTAMPS_EQUAL",isSpanVisibleInView:!0};if(o<=0)return{type:"INVALID_VIEW_WINDOW",isSpanVisibleInView:!0};const{startTimestamp:e,endTimestamp:n}=h(t),r=(t=>{const e=t.startTimestamp,n=t.endTimestamp;return e<n?T.Stable:e===n?T.Equal:T.Reversed})(t),a=(e-i)/o,p=(n-i)/o,l=p>0&&a<1;switch(r){case T.Equal:return{type:"TIMESTAMPS_EQUAL",start:a,width:1,isSpanVisibleInView:p>=0&&a<=1};case T.Reversed:return{type:"TIMESTAMPS_REVERSED",start:a,end:p,isSpanVisibleInView:l};case T.Stable:return{type:"TIMESTAMPS_STABLE",start:a,end:p,isSpanVisibleInView:l};default:return r}}};function v(t){return{trace_id:t.traceID,span_id:t.rootSpanID,parent_span_id:t.parentSpanID,start_timestamp:t.traceStartTimestamp,timestamp:t.traceEndTimestamp,op:t.op,description:t.description,data:{},status:t.rootSpanStatus}}function g(t){return{start:u().unix(t.start).subtract(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS"),end:u().unix(t.end).add(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS")}}function _(t){return"type"in t&&"gap"===t.type}function y(t){if("type"in t){if("orphan"===t.type)return!0;if("gap"===t.type)return t.isOrphan}return!1}function w(t,e=""){return _(t)?e:t.span_id}function E(t){if(!_(t))return t.op}function b(t){var e;return null==t||null===(e=t.contexts)||void 0===e?void 0:e.trace}function C(t){var e;const n=t.entries.find((t=>t.type===m.U.SPANS)),r=null!==(e=null==n?void 0:n.data)&&void 0!==e?e:[],a=b(t),i=a&&a.trace_id||"",p=a&&a.span_id||"",c=a&&a.op||"transaction",u=a&&a.description,f=a&&a.parent_span_id,h=a&&a.status;if(!n||r.length<=0)return{op:c,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:i,rootSpanID:p,rootSpanStatus:h,parentSpanID:f,spans:[],description:u};const T=new Set(r.map((t=>t.span_id)));T.add(p);const S={op:c,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:i,rootSpanID:p,rootSpanStatus:h,parentSpanID:f,spans:r,description:u},v=r.reduce(((t,e)=>{var n;let r=e;const a=function(t){return _(t)?"gap-span":t.parent_span_id}(r),i=a&&T.has(a);var c;c=a,o()(c)&&c.length>0&&i||(r.parent_span_id=p,r={type:"orphan",...r}),(0,d.hu)(r.parent_span_id);const u=null!==(n=t.childSpans[r.parent_span_id])&&void 0!==n?n:[];u.push(r),l()(t.childSpans,r.parent_span_id,u),(!t.traceStartTimestamp||r.start_timestamp<t.traceStartTimestamp)&&(t.traceStartTimestamp=r.start_timestamp);const m=s()(r.timestamp);return t.traceEndTimestamp?m&&r.timestamp>t.traceEndTimestamp?(t.traceEndTimestamp=r.timestamp,t):(r.start_timestamp>t.traceEndTimestamp&&(t.traceEndTimestamp=r.start_timestamp),t):m?(t.traceEndTimestamp=r.timestamp,t):(t.traceEndTimestamp=r.start_timestamp,t)}),S);return Object.values(v.childSpans).forEach((t=>{t.sort(F)})),v}function F(t,e){return y(t)&&!y(e)?1:!y(t)&&y(e)||t.start_timestamp<e.start_timestamp?-1:t.start_timestamp===e.start_timestamp?0:1}function I(t){return"number"!=typeof t&&"orphan"===(null==t?void 0:t.type)}function x(t){return I(t)?t.depth:t}function R(t){var e;const n=null===(e=t.sdk)||void 0===e?void 0:e.name;return!!n&&["sentry.javascript.browser","sentry.javascript.react","sentry.javascript.gatsby","sentry.javascript.ember","sentry.javascript.vue","sentry.javascript.angular","sentry.javascript.nextjs"].includes(n.toLowerCase())}const q=["mark","paint"];function D(t){const e=Object.keys(t);return Object.values(f.r).filter((t=>e.includes(t.slug))).some((e=>{const n=t[e.slug];return"number"==typeof n&&"number"==typeof e.poorThreshold&&n>=e.poorThreshold}))}function j(t){if(!t.measurements)return new Map;const e=Object.keys(t.measurements).filter((t=>t.startsWith("mark."))).map((e=>{const n=e.slice("mark.".length),r=t.measurements[n];return{name:e,timestamp:t.measurements[e].value,value:r?r.value:void 0}})),n=new Map;return e.forEach((t=>{const e=t.name.slice("mark.".length),r=t.value;if(n.has(t.timestamp)){const a=n.get(t.timestamp);return a.marks={...a.marks,[e]:r},a.failedThreshold||(a.failedThreshold=D(a.marks)),void n.set(t.timestamp,a)}const a={[e]:r};n.set(t.timestamp,{marks:a,failedThreshold:D(a)})})),n}function A(t,e){const n=e({startTimestamp:t,endTimestamp:t});switch(n.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:n.start,width:1e-5,isSpanVisibleInView:n.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:n.start,width:n.end-n.start,isSpanVisibleInView:n.isSpanVisibleInView};default:return n}}function P(t,e,n){return a=>{a.preventDefault();const s="#span-".concat(t);e(s),r.browserHistory.push({...n,hash:s})}}},"./app/utils/performance/quickTrace/utils.tsx":(t,e,n)=>{n.d(e,{hp:()=>u,q2:()=>m,eW:()=>d,R8:()=>h,eF:()=>S,_Z:()=>v,$J:()=>g,S2:()=>_,xB:()=>y,y3:()=>w,Ci:()=>E}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/lodash/omit.js"),a=n.n(r),s=n("../node_modules/moment-timezone/index.js"),i=n.n(s),o=n("./app/components/events/interfaces/spans/utils.tsx"),p=n("./app/constants/globalSelectionHeader.tsx"),l=n("./app/utils/analytics.tsx"),c=n("./app/utils/discover/eventView.tsx");function u(t){return"transaction"===t.type}function m(t,e){return u(e)?t.event_id===e.id:void 0!==t.errors&&t.errors.some((t=>t.event_id===e.id))}function d(t,e){const n=[],r=[],a=[{event:e,path:[]}];for(;a.length;){const e=a.shift();if(m(e.event,t)){for(const t of e.path)n.push(t);r.push(e.event)}else{const t=[...e.path,f(e.event)];for(const n of e.event.children)a.push({event:n,path:t})}}if(!r.length)throw new Error("No relevant path exists!");for(;r.length;){const t=r.shift();for(const e of t.children)r.push(e);n.push(f(t))}return n}function f(t){return a()(t,["children"])}function h(t,e,n){var r,a,s;const{type:i,trace:o}=t;if("empty"===i||null===o)throw new Error("Current event not in trace navigator!");const p="full"===i,c=null!==(r=o.find((t=>m(t,e))))&&void 0!==r?r:null;if(null===c)throw new Error("Current event not in trace navigator!");const u=c.parent_event_id&&null!==(a=o.find((t=>t.event_id===c.parent_event_id)))&&void 0!==a?a:null,d=null!==(s=o.find((t=>t.event_id!==c.event_id&&t.event_id!==(null==u?void 0:u.event_id)&&0===t.generation)))&&void 0!==s?s:null,f=p?[]:null,h=[],S=p?[]:null,v=new Set;return o.forEach((t=>{v.add(t.project_id),(t=>t.parent_event_id===c.event_id)(t)?h.push(t):p&&((t=>null!==c.generation&&null!==t.generation&&t.generation>0&&c.generation-1>t.generation)(t)?null==f||f.push(t):(t=>null!==c.generation&&null!==t.generation&&c.generation+1<t.generation)(t)&&(null==S||S.push(t)))})),p&&v.size>1&&function(t,e){(0,l.ec)({eventKey:"quick_trace.connected_services",eventName:"Quick Trace: Connected Services",organization_id:parseInt(t.id,10),projects:e})}(n,v.size),{root:d,ancestors:null===f?null:T(f),parent:u,current:c,children:T(h),descendants:null===S?null:T(S)}}function T(t){return t.sort(((t,e)=>e["transaction.duration"]-t["transaction.duration"]))}function S({eventView:t,location:e}){return a()(t.getEventsAPIPayload(e),["field","sort","per_page"])}function v({start:t,end:e,statsPeriod:n}){return c.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[p.mP],query:"",environment:[],start:t,end:e,range:n})}function g(t){const e=u(t)?t.startTimestamp:i()(t.dateReceived?t.dateReceived:t.dateCreated).valueOf()/1e3,n=u(t)?t.endTimestamp:e;return(0,o.TC)({start:e,end:n})}function _(t,e,n){let r=n;const a=[t];for(;a.length;){const t=a.pop();for(const e of t.children)a.push(e);r=e(r,t)}return r}function y(t,e){return _(t,((t,n)=>(e(n)&&t.push(n),t)),[])}function w(t){return Boolean(t.event_id)}function E(t){return Boolean(t.event_id)}},"./app/utils/performance/vitals/constants.tsx":(t,e,n)=>{n.d(e,{r:()=>s,T:()=>i});var r=n("./app/locale.tsx"),a=n("./app/utils/discover/fields.tsx");const s={[a.Zl.FP]:{slug:"fp",name:(0,r.t)("First Paint"),acronym:"FP",description:(0,r.t)("Render time of the first pixel loaded in the viewport (may overlap with FCP)."),poorThreshold:3e3,type:(0,a.Cq)(a.Zl.FP)},[a.Zl.FCP]:{slug:"fcp",name:(0,r.t)("First Contentful Paint"),acronym:"FCP",description:(0,r.t)("Render time of the first image, text or other DOM node in the viewport."),poorThreshold:3e3,type:(0,a.Cq)(a.Zl.FCP)},[a.Zl.LCP]:{slug:"lcp",name:(0,r.t)("Largest Contentful Paint"),acronym:"LCP",description:(0,r.t)("Render time of the largest image, text or other DOM node in the viewport."),poorThreshold:4e3,type:(0,a.Cq)(a.Zl.LCP)},[a.Zl.FID]:{slug:"fid",name:(0,r.t)("First Input Delay"),acronym:"FID",description:(0,r.t)("Response time of the browser to a user interaction (clicking, tapping, etc)."),poorThreshold:300,type:(0,a.Cq)(a.Zl.FID)},[a.Zl.CLS]:{slug:"cls",name:(0,r.t)("Cumulative Layout Shift"),acronym:"CLS",description:(0,r.t)("Sum of layout shift scores that measure the visual stability of the page."),poorThreshold:.25,type:(0,a.Cq)(a.Zl.CLS)},[a.Zl.TTFB]:{slug:"ttfb",name:(0,r.t)("Time to First Byte"),acronym:"TTFB",description:(0,r.t)("The time that it takes for a user's browser to receive the first byte of page content."),poorThreshold:600,type:(0,a.Cq)(a.Zl.TTFB)},[a.Zl.RequestTime]:{slug:"ttfb.requesttime",name:(0,r.t)("Request Time"),acronym:"RT",description:(0,r.t)("Captures the time spent making the request and receiving the first byte of the response."),poorThreshold:600,type:(0,a.Cq)(a.Zl.RequestTime)}},i={[a.$n.AppStartCold]:{slug:"app_start_cold",name:(0,r.t)("App Start Cold"),description:(0,r.t)("Cold start is a measure of the application start up time from scratch."),type:(0,a.Cq)(a.$n.AppStartCold)},[a.$n.AppStartWarm]:{slug:"app_start_warm",name:(0,r.t)("App Start Warm"),description:(0,r.t)("Warm start is a measure of the application start up time while still in memory."),type:(0,a.Cq)(a.$n.AppStartWarm)},[a.$n.FramesTotal]:{slug:"frames_total",name:(0,r.t)("Total Frames"),description:(0,r.t)("Total frames is a count of the number of frames recorded within a transaction."),type:(0,a.Cq)(a.$n.FramesTotal)},[a.$n.FramesSlow]:{slug:"frames_slow",name:(0,r.t)("Slow Frames"),description:(0,r.t)("Slow frames is a count of the number of slow frames recorded within a transaction."),type:(0,a.Cq)(a.$n.FramesSlow)},[a.$n.FramesFrozen]:{slug:"frames_frozen",name:(0,r.t)("Frozen Frames"),description:(0,r.t)("Frozen frames is a count of the number of frozen frames recorded within a transaction."),type:(0,a.Cq)(a.$n.FramesFrozen)},[a.$n.FramesSlowRate]:{slug:"frames_slow_rate",name:(0,r.t)("Slow Frames Rate"),description:(0,r.t)("Slow Frames Rate is the percentage of frames recorded within a transaction that is considered slow."),type:(0,a.Cq)(a.$n.FramesSlowRate)},[a.$n.FramesFrozenRate]:{slug:"frames_frozen_rate",name:(0,r.t)("Frozen Frames Rate"),description:(0,r.t)("Frozen Frames Rate is the percentage of frames recorded within a transaction that is considered frozen."),type:(0,a.Cq)(a.$n.FramesFrozenRate)},[a.$n.StallCount]:{slug:"stall_count",name:(0,r.t)("Stalls"),description:(0,r.t)("Stalls is the number of times the application stalled within a transaction."),type:(0,a.Cq)(a.$n.StallCount)},[a.$n.StallTotalTime]:{slug:"stall_total_time",name:(0,r.t)("Total Stall Time"),description:(0,r.t)("Stall Total Time is the total amount of time the application is stalled within a transaction."),type:(0,a.Cq)(a.$n.StallTotalTime)},[a.$n.StallLongestTime]:{slug:"stall_longest_time",name:(0,r.t)("Longest Stall Time"),description:(0,r.t)("Stall Longest Time is the longest amount of time the application is stalled within a transaction."),type:(0,a.Cq)(a.$n.StallLongestTime)},[a.$n.StallPercentage]:{slug:"stall_percentage",name:(0,r.t)("Stall Percentage"),description:(0,r.t)("Stall Percentage is the percentage of the transaction duration the application was stalled."),type:(0,a.Cq)(a.$n.StallPercentage)}}},"./app/views/performance/traceDetails/utils.tsx":(t,e,n)=>{n.d(e,{YA:()=>s,Rg:()=>i,uM:()=>o}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("./app/constants/globalSelectionHeader.tsx"),a=n("./app/utils/performance/quickTrace/utils.tsx");function s(t,e,n,a){const{start:s,end:i,statsPeriod:o}=n;return{pathname:"/organizations/".concat(t.slug,"/performance/trace/").concat(e,"/"),query:{...a,statsPeriod:o,[r.V.PAGE_START]:s,[r.V.PAGE_END]:i}}}function i(t){const e={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return t.reduce(((t,e)=>(0,a.S2)(e,((t,e)=>{for(const r of null!==(n=e.errors)&&void 0!==n?n:[]){var n;t.errors.add(r.event_id)}return t.transactions.add(e.event_id),t.projects.add(e.project_slug),t.startTimestamp=Math.min(t.startTimestamp,e.start_timestamp),t.endTimestamp=Math.max(t.endTimestamp,e.timestamp),t.maxGeneration=Math.max(t.maxGeneration,e.generation),t}),t)),e)}function o(t){return null===t.parent_span_id}},"./app/views/performance/transactionSummary/utils.tsx":(t,e,n)=>{n.d(e,{K0:()=>p,e1:()=>l,Z6:()=>c,vd:()=>u,uI:()=>m});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=n("./app/styles/space.tsx"),s=n("./app/utils/discover/urls.tsx"),i=n("./app/views/performance/traceDetails/utils.tsx"),o=n("./app/views/performance/utils.tsx");let p;function l({orgSlug:t,transaction:e,projectID:n,query:r,unselectedSeries:a="p100()",display:s,trendFunction:i,trendColumn:o,showTransactions:p}){return{pathname:function({orgSlug:t}){return"/organizations/".concat(t,"/performance/summary/")}({orgSlug:t}),query:{transaction:e,project:n,environment:r.environment,statsPeriod:r.statsPeriod,start:r.start,end:r.end,query:r.query,unselectedSeries:a,showTransactions:p,display:s,trendFunction:i,trendColumn:o}}}function c(t){return(e,n,r)=>{const a="".concat(n.trace);return a?(0,i.YA)(e,a,t,{}):{}}}function u(t){return(e,n,r)=>{const a=(0,s.JE)(n);return(0,o.DD)(e,a,t,r)}}!function(t){t.FASTEST="fastest",t.SLOW="slow",t.OUTLIER="outlier",t.RECENT="recent"}(p||(p={}));const m=(0,r.Z)("div",{target:"e1radvp0"})("margin-top:",(0,a.Z)(3),";")},"./app/views/performance/utils.tsx":(t,e,n)=>{n.d(e,{iy:()=>d,Bh:()=>S,C$:()=>v,Ik:()=>g,iL:()=>_,de:()=>y,Ws:()=>w,Ov:()=>E,DD:()=>b,hp:()=>C,n4:()=>F,JY:()=>I,Xr:()=>x,YL:()=>R}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.trim.js");var r=n("./app/components/duration.tsx"),a=n("./app/constants/globalSelectionHeader.tsx"),s=n("./app/data/platformCategories.tsx"),i=n("./app/utils.tsx"),o=n("./app/utils/dates.tsx"),p=n("./app/utils/formatters.tsx"),l=n("./app/utils/getCurrentSentryReactTransaction.tsx"),c=n("./app/utils/queryString.tsx"),u=n("./app/utils/tokenizeSearch.tsx"),m=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let d;!function(t){t.ANY="any",t.FRONTEND="frontend",t.BACKEND="backend",t.FRONTEND_OTHER="frontend_other",t.MOBILE="mobile"}(d||(d={}));const f=[...s.tQ],h=[...s.y3],T=[...s.ai];function S(t,e){if(0===e.length||e[0]===a.mP)return d.ANY;const n=t.filter((t=>e.includes(parseInt(t.id,10))));return 0===n.length||n.some((t=>!t.platform))?d.ANY:n.every((t=>f.includes(t.platform)))?d.FRONTEND:n.every((t=>h.includes(t.platform)))?d.BACKEND:n.every((t=>T.includes(t.platform)))?d.MOBILE:d.ANY}function v(t,e){const n=S(t,e.project);return n===d.FRONTEND&&new u.MY(e.query).getFilterValues("!transaction.op").some((t=>"pageload"===t))?d.FRONTEND_OTHER:n}function g(t,e){return v(e,t)===d.FRONTEND}function _(t,e){return v(e,t)===d.FRONTEND||v(e,t)===d.FRONTEND_OTHER}function y(t){return"/organizations/".concat(t.slug,"/performance/")}function w(t){return"/organizations/".concat(t.slug,"/performance/trends/")}function E(t,e=""){return(0,c.ro)(t.query.query,e).trim()}function b(t,e,n,r){return{pathname:"/organizations/".concat(t.slug,"/performance/").concat(e,"/"),query:{...r,transaction:n}}}function C({organization:t,baselineEventSlug:e,regressionEventSlug:n,transaction:r,query:a}){return{pathname:"/organizations/".concat(t.slug,"/performance/compare/").concat(e,"/").concat(n,"/"),query:{...a,transaction:r}}}function F(t){const e=(0,l.Z)(),n=(0,o.Ri)(t.datetime.period,t.datetime.start,t.datetime.end),r=Math.floor(86400*n);null==e||e.setTag("query.period",r.toString());let a=">30d";r<=86400?a="<=1d":r<=604800?a="<=7d":r<=1209600?a="<=14d":r<=2592e3&&(a="<=30d"),null==e||e.setTag("query.period.grouped",a)}function I(t){const{transaction:e}=t.query;return(0,c.ro)(e)}function x(t){const e=(t=>(0,i.ri)(t.milliseconds))(t)?t.milliseconds/1e3:t.seconds;return(0,m.tZ)(r.Z,{abbreviation:t.abbreviation,seconds:e,fixedDigits:e>1?2:0})}function R(t){return(0,p.g9)(t/1e3,t>1e3?2:0,!0)}x.displayName="PerformanceDuration"}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_utils_tsx.8a1adba9c97738473a07dff0849548b8.js.map