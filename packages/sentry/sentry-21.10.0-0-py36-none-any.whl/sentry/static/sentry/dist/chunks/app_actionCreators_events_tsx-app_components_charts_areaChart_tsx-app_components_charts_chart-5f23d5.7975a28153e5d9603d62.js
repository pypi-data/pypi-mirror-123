"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_actionCreators_events_tsx-app_components_charts_areaChart_tsx-app_components_charts_chart-5f23d5"],{"./app/actionCreators/events.tsx":(t,e,o)=>{o.d(e,{lI:()=>d,eV:()=>c,JE:()=>l}),o("../node_modules/core-js/modules/es.object.from-entries.js"),o("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=o("../node_modules/lodash/pick.js"),n=o.n(s),r=o("./app/components/charts/utils.tsx"),a=o("./app/utils/getPeriod.tsx"),i=o("./app/utils/performance/constants.tsx");const d=(t,{organization:e,project:o,environment:s,team:n,period:i,start:d,end:c,interval:l,comparisonDelta:p,includePrevious:u,query:m,yAxis:h,field:x,topEvents:y,orderby:g,partial:v,withoutZerofill:f,referrer:Z})=>{const b=(0,r.Sw)(u,i),C=Object.fromEntries(Object.entries({interval:l,comparisonDelta:p,project:o,environment:s,team:n,query:m,yAxis:h,field:x,topEvents:y,orderby:g,partial:v?"1":void 0,withoutZerofill:f?"1":void 0,referrer:Z||"api.organization-event-stats"}).filter((([,t])=>void 0!==t))),j=(0,a.X)({period:i,start:d,end:c},{shouldDoublePeriod:b});return t.requestPromise("/organizations/".concat(e.slug,"/events-stats/"),{query:{...C,...j}})};async function c(t,e,o){const s={...n()(o,Object.values(i.s)),query:o.query};return t.requestPromise("/organizations/".concat(e,"/events-facets/"),{query:s})}async function l(t,e,o){const s={...n()(o,Object.values(i.s)),query:o.query};return t.requestPromise("/organizations/".concat(e,"/events-meta/"),{query:s}).then((t=>t.count))}},"./app/components/charts/areaChart.tsx":(t,e,o)=>{o.d(e,{Z:()=>d});var s=o("../node_modules/react/index.js"),n=o("./app/components/charts/series/lineSeries.tsx"),r=o("./app/components/charts/baseChart.tsx"),a=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends s.Component{render(){const{series:t,stacked:e,colors:o,...s}=this.props;return(0,a.tZ)(r.Z,{...s,colors:o,series:t.map((({seriesName:t,data:s,...r},a)=>function(t={}){return(0,n.Z)({...t})}({stack:e?"area":void 0,name:t,data:s.map((({name:t,value:e})=>[t,e])),lineStyle:{color:null==o?void 0:o[a],opacity:1,width:.4},areaStyle:{color:null==o?void 0:o[a],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...r})))})}}i.displayName="AreaChart";const d=i},"./app/components/charts/chartZoom.tsx":(t,e,o)=>{o.d(e,{Z:()=>x});var s=o("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=o("../node_modules/react/index.js"),r=o("../node_modules/moment/moment.js"),a=o.n(r),i=o("../node_modules/query-string/index.js"),d=o("./app/actionCreators/globalSelection.tsx"),c=o("./app/components/charts/components/dataZoomInside.tsx"),l=o("./app/components/charts/components/toolBox.tsx"),p=o("./app/utils/callIfFunction.tsx"),u=o("./app/utils/dates.tsx");const m=t=>t?a().utc(t).format(a().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class h extends n.Component{constructor(t){super(t),(0,s.Z)(this,"history",void 0),(0,s.Z)(this,"currentPeriod",void 0),(0,s.Z)(this,"zooming",null),(0,s.Z)(this,"saveCurrentPeriod",(t=>{this.currentPeriod={period:t.period,start:m(t.start),end:m(t.end)}})),(0,s.Z)(this,"setPeriod",(({period:t,start:e,end:o},s=!1)=>{const{router:n,onZoom:r,usePageDate:a}=this.props,c=m(e),l=m(o);s&&this.history.push(this.currentPeriod),(0,p.g)(r,{period:t,start:c,end:l}),this.zooming=()=>{if(a&&n){const s={...n.location.query,pageStart:e?(0,u.v5)(e):void 0,pageEnd:o?(0,u.v5)(o):void 0,pageStatsPeriod:null!=t?t:void 0};i.stringify(s)!==i.stringify(n.location.query)&&n.push({pathname:n.location.pathname,query:s})}else(0,d.dR)({period:t,start:c?(0,u.hC)(c):c,end:l?(0,u.hC)(l):l},n);this.saveCurrentPeriod({period:t,start:e,end:o})}})),(0,s.Z)(this,"handleChartReady",(t=>{t.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,p.g)(this.props.onChartReady,t)})),(0,s.Z)(this,"handleZoomRestore",((t,e)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],(0,p.g)(this.props.onRestore,t,e))})),(0,s.Z)(this,"handleDataZoom",((t,e)=>{const o=e.getModel(),{xAxis:s}=o.option,n=s[0];if(null===n.rangeStart&&null===n.rangeEnd){const t=this.history.pop();if(!t)return;this.setPeriod(t)}else{const t=a().utc(n.rangeStart),e=a().utc(n.rangeEnd);this.setPeriod({period:null,start:t,end:e},!0)}(0,p.g)(this.props.onDataZoom,t,e)})),(0,s.Z)(this,"handleChartFinished",(()=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null),(0,p.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(t)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:t,start:e,end:o,disabled:s,children:n,xAxisIndex:r,router:a,onZoom:i,onRestore:d,onChartReady:p,onDataZoom:m,onFinished:h,...x}=this.props,y=null!=t?t:void 0,g=e?(0,u.hC)(e):void 0,v=o?(0,u.hC)(o):void 0;return n(s?{utc:y,start:g,end:v,...x}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:y,start:g,end:v,dataZoom:(0,c.Z)({xAxisIndex:r}),showTimeInTooltip:!0,toolBox:(0,l.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...x})}}h.displayName="ChartZoom";const x=h},"./app/components/charts/transparentLoadingMask.tsx":(t,e,o)=>{o.d(e,{Z:()=>a});var s=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(o("../node_modules/react/index.js"),o("./app/components/loadingMask.tsx")),r=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=(0,s.Z)((({className:t,visible:e,children:o,...s})=>{const a=e?{...s,"data-test-id":"loading-placeholder"}:s;return(0,r.tZ)(n.Z,{className:t,...a,children:o})}),{target:"ewtkxp50"})((t=>!t.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/utils/discover/charts.tsx":(t,e,o)=>{o.d(e,{CX:()=>a,gu:()=>i});var s=o("./app/locale.tsx"),n=o("./app/utils/discover/fields.tsx"),r=o("./app/utils/formatters.tsx");function a(t,e=""){switch((0,n.Px)(e)){case"integer":case"number":return t.toLocaleString();case"percentage":return(0,r.rl)(t,2);case"duration":return(0,r.g9)(t/1e3,2,!0);default:return t.toString()}}function i(t,e,o=!1){switch((0,n.Px)(e)){case"integer":case"number":return o?(0,r.Du)(t):t.toLocaleString();case"percentage":return(0,r.rl)(t,0);case"duration":return function(t){if(0===t)return"0";if(t>=r.ps){const e=(t/r.ps).toFixed(0);return(0,s.t)("%swk",e)}if(t>=r.x4){const e=(t/r.x4).toFixed(0);return(0,s.t)("%sd",e)}if(t>=r.kr){const e=(t/r.kr).toFixed(0);return(0,s.t)("%shr",e)}if(t>=r.EB){const e=(t/r.EB).toFixed(0);return(0,s.t)("%smin",e)}if(t>=r.sh){const e=(t/r.sh).toFixed(0);return(0,s.t)("%ss",e)}const e=t.toFixed(0);return(0,s.t)("%sms",e)}(t);default:return t.toString()}}},"./app/utils/getPeriod.tsx":(t,e,o)=>{o.d(e,{X:()=>i}),o("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=o("../node_modules/moment/moment.js"),n=o.n(s),r=o("./app/constants/index.tsx"),a=o("./app/utils/dates.tsx");const i=({period:t,start:e,end:o},{shouldDoublePeriod:s}={})=>{if(t||e||o||(t=r.GY),t){if(!s)return{statsPeriod:t};const[,e,o]=t.match(/([0-9]+)([mhdw])/);return{statsPeriod:"".concat(2*parseInt(e,10)).concat(o)}}if(!e||!o)throw new Error("start and end required");const i=(0,a.v5)(e),d=(0,a.v5)(o);if(s){const t=n()(o).diff(n()(e)),s=n()(e).subtract(t);return{start:(0,a.v5)(s),end:d}}return{start:i,end:d}}},"./app/views/dashboardsV2/contextMenu.tsx":(t,e,o)=>{o.d(e,{Z:()=>u});var s=o("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=o("../node_modules/classnames/index.js"),r=o.n(n),a=o("./app/components/dropdownMenu.tsx"),i=o("./app/icons/index.tsx"),d=o("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=({children:t})=>(0,d.tZ)(a.Z,{children:({isOpen:e,getRootProps:o,getActorProps:s,getMenuProps:n})=>{const a=r()("dropdown",{"anchor-right":!0,open:e});return(0,d.BX)(l,{...o({className:a}),children:[(0,d.tZ)(p,{...s({onClick:t=>{t.stopPropagation(),t.preventDefault()}}),children:(0,d.tZ)(i.YR,{"data-test-id":"context-menu",size:"md"})}),e&&(0,d.tZ)("ul",{...n({}),className:r()("dropdown-menu"),children:t})]})}});c.displayName="ContextMenu";const l=(0,s.Z)("span",{target:"e1xn1f5x1"})("display:flex;color:",(t=>t.theme.textColor),";"),p=(0,s.Z)("div",{target:"e1xn1f5x0"})({name:"1y7emqs",styles:"display:flex;cursor:pointer;padding:0 5px"}),u=c}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_events_tsx-app_components_charts_areaChart_tsx-app_components_charts_chart-5f23d5.2502aa5e1a94e0f80e6b52421d3f65cf.js.map