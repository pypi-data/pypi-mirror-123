"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_alerts_edit_tsx"],{"./app/views/alerts/edit.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("./app/components/layouts/thirds.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),l=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),p=s("./app/utils/analytics.tsx"),c=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),d=s("./app/utils/withTeams.tsx"),h=s("./app/views/alerts/incidentRules/ruleForm/index.tsx"),m=s("./app/views/asyncView.tsx"),g=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class x extends m.Z{constructor(...e){super(...e),(0,r.Z)(this,"handleSubmitSuccess",(()=>{const{router:e}=this.props,{orgId:t}=this.props.params;p.oF.endTransaction({name:"saveAlertRule"}),e.push("/organizations/".concat(t,"/alerts/rules/"))}))}getDefaultState(){return{...super.getDefaultState(),actions:new Map}}getEndpoints(){const{orgId:e,ruleId:t}=this.props.params;return[["rule","/organizations/".concat(e,"/alert-rules/").concat(t,"/")]]}onRequestSuccess({stateKey:e,data:t}){"rule"===e&&t.name&&this.props.onChangeTitle(t.name)}renderBody(){const{teams:e}=this.props,{ruleId:t}=this.props.params,{rule:s}=this.state,r=e.filter((({isMember:e})=>e)).map((({id:e})=>e));return(0,g.tZ)(h.Z,{...this.props,ruleId:t,rule:s,onSubmitSuccess:this.handleSubmitSuccess,userTeamIds:r})}}const Z=(0,d.Z)(x);var w=s("./app/views/alerts/issueRuleEditor/index.tsx");class b extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{ruleName:""}),(0,r.Z)(this,"handleChangeTitle",(e=>{this.setState({ruleName:e})}))}componentDidMount(){const{organization:e,project:t}=this.props;(0,p.ec)({eventKey:"edit_alert_rule.viewed",eventName:"Edit Alert Rule: Viewed",organization_id:e.id,project_id:t.id,alert_type:this.getAlertType()})}getTitle(){const{ruleName:e}=this.state;return"".concat(e)}getAlertType(){return location.pathname.includes("/alerts/metric-rules/")?"metric":"issue"}render(){const{hasMetricAlerts:e,location:t,organization:s,project:r,routes:i}=this.props,u=this.getAlertType();return(0,g.BX)(o.Fragment,{children:[(0,g.tZ)(n.Z,{title:this.getTitle(),orgSlug:s.slug,projectSlug:r.slug}),(0,g.tZ)(a.h4,{children:(0,g.BX)(a.oB,{children:[(0,g.tZ)(c.Z,{orgSlug:s.slug,title:(0,l.t)("Edit Alert Rule"),projectSlug:r.slug,routes:i,location:t}),(0,g.tZ)(a.Dx,{children:this.getTitle()})]})}),(0,g.tZ)(T,{children:(0,g.BX)(a.or,{fullWidth:!0,children:[(!e||"issue"===u)&&(0,g.tZ)(w.Z,{...this.props,project:r,onChangeTitle:this.handleChangeTitle}),e&&"metric"===u&&(0,g.tZ)(Z,{...this.props,project:r,onChangeTitle:this.handleChangeTitle})]})})]})}}b.displayName="ProjectAlertsEditor";const T=(0,i.Z)(a.uT,{target:"eqr07hw0"})("margin-bottom:-",(0,u.Z)(3),";*:not(img){max-width:1000px;}"),j=b}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_edit_tsx.a95fe718721c9d4b6489803cdbeb812e.js.map