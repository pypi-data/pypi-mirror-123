"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_alerts_create_tsx"],{"./app/views/alerts/create.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>S});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-router/es/index.js"),n=s("./app/components/layouts/thirds.tsx"),l=s("./app/components/sentryDocumentTitle.tsx"),c=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),p=s("./app/utils/analytics.tsx"),u=s("./app/utils/discover/eventView.tsx"),m=s("./app/utils/guid.tsx"),g=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),w=s("./app/utils/withTeams.tsx"),v=s("./app/views/alerts/incidentRules/constants.tsx"),h=s("./app/views/alerts/incidentRules/ruleForm/index.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function j(e){var t;const{project:s,eventView:r,wizardTemplate:i,sessionId:o,teams:a,...n}=e,l=r?(0,v.H9)(r):i?(0,v.Q6)(i):(0,v.ep)(),c=a.filter((({isMember:e})=>e)).map((({id:e})=>e)),d=new Set(s.teams.map((({id:e})=>e))),u=null!==(t=c.find((e=>d.has(e))))&&void 0!==t?t:null;return l.owner=u&&"team:".concat(u),(0,x.tZ)(h.Z,{onSubmitSuccess:function(){const{router:t}=e,{orgId:s}=e.params;p.oF.endTransaction({name:"saveAlertRule"}),t.push("/organizations/".concat(s,"/alerts/rules/"))},rule:{...l,projects:[s.slug]},sessionId:o,project:s,userTeamIds:c,...n})}j.displayName="IncidentRulesCreate";const y=(0,w.Z)(j);var Z=s("./app/views/alerts/issueRuleEditor/index.tsx"),b=s("./app/views/alerts/wizard/options.tsx"),_=s("./app/views/alerts/wizard/utils.tsx");class z extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",this.getInitialState()),(0,r.Z)(this,"sessionId",(0,m.E)())}getInitialState(){var e;const{organization:t,location:s,project:r}=this.props,{createFromDiscover:i,createFromWizard:o,aggregate:n,dataset:l,eventTypes:c}=null!==(e=null==s?void 0:s.query)&&void 0!==e?e:{};let d="issue";return i?d="metric":o?d=n&&l&&c?"metric":"issue":a.browserHistory.replace("/organizations/".concat(t.slug,"/alerts/").concat(r.slug,"/wizard")),{alertType:d}}componentDidMount(){const{organization:e,project:t}=this.props;(0,p.ec)({eventKey:"new_alert_rule.viewed",eventName:"New Alert Rule: Viewed",organization_id:e.id,project_id:t.id,session_id:this.sessionId,alert_type:this.state.alertType})}render(){var e;const{hasMetricAlerts:t,organization:s,project:r,params:{projectId:i},location:a,routes:d}=this.props,{alertType:p}=this.state,{aggregate:m,dataset:w,eventTypes:v,createFromWizard:h,createFromDiscover:j}=null!==(e=null==a?void 0:a.query)&&void 0!==e?e:{},z={aggregate:m,dataset:w,eventTypes:v},S=j?u.ZP.fromLocation(a):void 0;let C;h&&"metric"===p&&(C=z?(0,_.k)(z):"issues");const F=(0,c.t)("New Alert Rule");return(0,x.BX)(o.Fragment,{children:[(0,x.tZ)(l.Z,{title:F,projectSlug:i}),(0,x.tZ)(n.h4,{children:(0,x.BX)(I,{children:[(0,x.tZ)(g.Z,{orgSlug:s.slug,alertName:(0,c.t)("Set Conditions"),title:C?(0,c.t)("Select Alert"):F,projectSlug:i,routes:d,location:a,canChangeProject:!0}),(0,x.tZ)(n.Dx,{children:C?"".concat((0,c.t)("Set Conditions for")," ").concat(b.gb[C]):F})]})}),(0,x.tZ)(T,{children:(0,x.BX)(f,{fullWidth:!0,children:[(!t||"issue"===p)&&(0,x.tZ)(Z.Z,{...this.props,project:r}),t&&"metric"===p&&(0,x.tZ)(y,{...this.props,eventView:S,wizardTemplate:z,sessionId:this.sessionId,project:r,isCustomMetric:"custom"===C})]})})]})}}z.displayName="Create";const T=(0,i.Z)(n.uT,{target:"ew02uqt2"})("margin-bottom:-",(0,d.Z)(3),";"),f=(0,i.Z)(n.or,{target:"ew02uqt1"})({name:"1rxb0gn",styles:"max-width:1000px"}),I=(0,i.Z)(n.oB,{target:"ew02uqt0"})({name:"1h8nup8",styles:"overflow:visible"}),S=z}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_create_tsx.540cb9195516d29c22aafec9b8942a77.js.map