"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_utils_sessions_tsx"],{"./app/utils/sessions.tsx":(e,t,s)=>{s.d(t,{sA:()=>S,Pn:()=>E,$K:()=>R,BN:()=>A,FS:()=>m,Y5:()=>f,mo:()=>v,hD:()=>y,iy:()=>H,Lv:()=>O,Xz:()=>N,U5:()=>D});var r=s("../node_modules/lodash/compact.js"),n=s.n(r),a=s("../node_modules/lodash/mean.js"),o=s.n(a),i=s("../node_modules/moment/moment.js"),l=s.n(i),u=s("./app/components/charts/utils.tsx"),c=s("./app/types/index.tsx"),d=s("./app/utils.tsx"),h=s("./app/views/releases/utils/index.tsx"),p=s("./app/views/releases/utils/sessionTerm.tsx");function S(e=[],t){return e.reduce(((e,s)=>e+s.totals[t]),0)}function E(e=[],t){const s=A(e,t,c.$y.CRASHED);return(0,d.ri)(s)?(0,h.Mf)(100-s):null}function R(e=[],t){const s=S(e,t),r=e.filter((e=>!!e.totals[t])).length;return(0,d.ri)(s)&&null!==r&&0!==s?s/r:null}function A(e=[],t,s){const r=S(e,t),n=S(e.filter((({by:e})=>e["session.status"]===s)),t);return(0,d.ri)(r)&&0!==r?(0,d.aQ)(null!=n?n:0,null!=r?r:0):null}function m(e=[],t=[],s){return n()(t.map(((t,r)=>{var n,a;const o=e.reduce(((e,t)=>e+t.series[s][r]),0),i=null!==(n=null===(a=e.find((e=>e.by["session.status"]===c.$y.CRASHED)))||void 0===a?void 0:a.series[s][r])&&void 0!==n?n:0,l=(0,d.aQ)(i,o);return 0===o?null:{name:t,value:(0,h.Mf)(100-l)}})))}function f(e=[],t=[],s,r){return n()(t.map(((t,n)=>{var a,o;const i=e.reduce(((e,t)=>e+t.series[s][n]),0),l=null!==(a=null===(o=e.find((e=>e.by["session.status"]===r)))||void 0===o?void 0:o.series[s][n])&&void 0!==a?a:0,u=(0,d.aQ)(l,i);return 0===i?null:{name:t,value:(0,h.r)(u)}})))}function v(e=[],t=[],s,r){return n()(t.map(((t,n)=>{const a=o()(e.map((e=>e.series[s][n])).filter((e=>!!e)));return a?{name:t,value:"function"==typeof r?r(a):a}:null})))}function y(e=[],t=[],s=[],r){return s.map(((s,n)=>{const a=e.reduce(((e,t)=>{var s,a;return e+(null!==(s=null===(a=t.series[r])||void 0===a?void 0:a[n])&&void 0!==s?s:0)}),0),o=t.reduce(((e,t)=>{var s,a;return e+(null!==(s=null===(a=t.series[r])||void 0===a?void 0:a[n])&&void 0!==s?s:0)}),0),i=(0,d.aQ)(a,o);return{name:s,value:Math.round(i)}}))}function H(e,t,s=[]){return s.map(((s,r)=>{var n;return{name:s,value:null!==(n=null==t?void 0:t.series[e][r])&&void 0!==n?n:0}}))}function O(e){const t=e.charts.getColorPalette(14);return{[c.$y.HEALTHY]:{seriesName:p.U1.healthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ERRORED]:{seriesName:p.U1.errored,data:[],color:t[12],areaStyle:{color:t[12],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.ABNORMAL]:{seriesName:p.U1.abnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:1},lineStyle:{opacity:0,width:.4}},[c.$y.CRASHED]:{seriesName:p.U1.crashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:1},lineStyle:{opacity:0,width:.4}}}}function N(e,{highFidelity:t}={}){const s=(0,u.Nm)(e);return l()(e.start).isSameOrBefore(l()().subtract(30,"days"))&&(t=!1),s>u.$i?"1d":s>u.IZ?"6h":t&&s<360?s<=30?"1m":"5m":"1h"}function D(e,t,s){if(!t||!s)return e;const r=[],n=e.intervals.filter(((e,n)=>{const a=l().utc(e).isBetween(l().utc(t),l().utc(s),void 0,"[]");return a&&r.push(n),a})),a=e.groups.map((e=>{const t={},s={};return Object.keys(e.series).forEach((n=>{s[n]=0,t[n]=e.series[n].filter(((e,t)=>{const a=r.includes(t);var o;return a&&(s[n]=(null!==(o=s[n])&&void 0!==o?o:0)+e),a})),n.startsWith("p50")&&(s[n]=o()(t[n])),n.startsWith("count_unique")&&(s[n]=e.totals[n])})),{...e,series:t,totals:s}}));return{start:n[0],end:n[n.length-1],query:e.query,intervals:n,groups:a}}},"./app/views/releases/list/utils.tsx":(e,t,s)=>{let r,n,a;s.d(t,{Y7:()=>r,zY:()=>n,L4:()=>a}),function(e){e.CRASH_FREE_USERS="crash_free_users",e.CRASH_FREE_SESSIONS="crash_free_sessions",e.USERS_24_HOURS="users_24h",e.SESSIONS_24_HOURS="sessions_24h",e.SESSIONS="sessions",e.DATE="date",e.BUILD="build",e.SEMVER="semver",e.ADOPTION="adoption"}(r||(r={})),function(e){e.USERS="users",e.SESSIONS="sessions"}(n||(n={})),function(e){e.ACTIVE="active",e.ARCHIVED="archived"}(a||(a={}))},"./app/views/releases/utils/index.tsx":(e,t,s)=>{s.d(t,{hf:()=>R,G5:()=>A,Mf:()=>m,zB:()=>f,r:()=>v,G$:()=>y,PS:()=>H,eY:()=>O,TB:()=>N,rF:()=>D,gs:()=>C,C8:()=>_,O7:()=>w}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/lodash/pick.js"),n=s.n(r),a=s("../node_modules/lodash/round.js"),o=s.n(a),i=s("../node_modules/moment/moment.js"),l=s.n(i),u=s("./app/components/organizations/globalSelectionHeader/getParams.tsx"),c=s("./app/constants/globalSelectionHeader.tsx"),d=s("./app/locale.tsx"),h=s("./app/types/index.tsx"),p=s("./app/utils/tokenizeSearch.tsx"),S=s("./app/views/issueList/utils.tsx"),E=s("./app/views/releases/list/utils.tsx");const R=95,A=e=>o()(e,e>60?0:3),m=(e,t=R,s=3)=>{const r=o()(e,e>t?s:0);return 100===r&&e<100?Math.floor(e*Math.pow(10,s))/Math.pow(10,s):r},f=(e,t=R,s=3)=>{if(isNaN(e))return"â€•";if(e<1&&e>0)return"<1%";const r=m(e,t,s).toLocaleString();return"".concat(r,"%")},v=(e,t=!0)=>o()(t?Math.abs(e):e,3),y=(e,t=!0)=>"".concat(v(e,t).toLocaleString(),"%"),H=(e,t,s)=>({pathname:"/organizations/".concat(e,"/issues/"),query:{project:t,statsPeriod:void 0,start:void 0,end:void 0,query:new p.MY(["firstRelease:".concat(s)]).formatString(),sort:S.qh.FREQ}}),O=(e,t,s,r={})=>({pathname:"/organizations/".concat(e,"/issues/"),query:{...r,project:t,query:new p.MY(["release:".concat(s),"error.unhandled:true"]).formatString(),sort:S.qh.FREQ}}),N=(e,t,s,r={})=>({pathname:"/organizations/".concat(e,"/issues/"),query:{...r,project:t,query:new p.MY(["release:".concat(s),"error.handled:true"]).formatString(),sort:S.qh.FREQ}}),D=e=>e.status===h.dE.Archived;function C(e,t){return e===E.zY.USERS?(0,d.tn)("user","users",t):(0,d.tn)("session","sessions",t)}function _(e){var t;const{lastEvent:s,currentProjectMeta:r,dateCreated:n}=e||{},{sessionsUpperBound:a}=r||{},o=l()(n).startOf("minute").utc().format(),i=l()(null!==(t=l()(a).isAfter(s)?a:s)&&void 0!==t?t:void 0).endOf("minute").utc().format();return l()(o).isSame(i,"minute")?{releaseStart:o,releaseEnd:l()(i).add(1,"minutes").utc().format()}:{releaseStart:o,releaseEnd:i}}function w({location:e,releaseBounds:t}){const s=(0,u.Q)(n()(e.query,[...Object.values(c.nF),...Object.values(c.V),"cursor"]),{allowAbsolutePageDatetime:!0,allowEmptyPeriod:!0});return Object.keys(s).some((e=>[c.nF.START,c.nF.END,c.nF.UTC,c.nF.PERIOD].includes(e)))||(s[c.nF.START]=t.releaseStart,s[c.nF.END]=t.releaseEnd),s}},"./app/views/releases/utils/sessionTerm.tsx":(e,t,s)=>{s.d(t,{_k:()=>n,U1:()=>a,w0:()=>o,RE:()=>u});var r=s("./app/locale.tsx");let n;!function(e){e.CRASHES="crashes",e.CRASHED="crashed",e.ABNORMAL="abnormal",e.CRASH_FREE="crashFree",e.CRASH_FREE_USERS="crash-free-users",e.CRASH_FREE_SESSIONS="crash-free-sessions",e.HEALTHY="healthy",e.ERRORED="errored",e.UNHANDLED="unhandled",e.STABILITY="stability",e.ADOPTION="adoption"}(n||(n={}));const a={[n.CRASHES]:(0,r.t)("Crashes"),[n.CRASHED]:(0,r.t)("Crashed"),[n.ABNORMAL]:(0,r.t)("Abnormal"),[n.CRASH_FREE_USERS]:(0,r.t)("Crash Free Users"),[n.CRASH_FREE_SESSIONS]:(0,r.t)("Crash Free Sessions"),[n.HEALTHY]:(0,r.t)("Healthy"),[n.ERRORED]:(0,r.t)("Errored"),[n.UNHANDLED]:(0,r.t)("Unhandled"),[n.ADOPTION]:(0,r.t)("Adoption"),duration:(0,r.t)("Session Duration"),otherCrashed:(0,r.t)("Other Crashed"),otherAbnormal:(0,r.t)("Other Abnormal"),otherErrored:(0,r.t)("Other Errored"),otherHealthy:(0,r.t)("Other Healthy"),otherCrashFreeUsers:(0,r.t)("Other Crash Free Users"),otherCrashFreeSessions:(0,r.t)("Other Crash Free Sessions"),otherReleases:(0,r.t)("Other Releases")},o={[n.CRASHES]:(0,r.t)("Number of sessions with a crashed state"),[n.CRASH_FREE]:(0,r.t)("Percentage of sessions/users who did not experience a crash."),[n.CRASH_FREE_USERS]:(0,r.t)("Percentage of unique users with non-crashed sessions"),[n.CRASH_FREE_SESSIONS]:(0,r.t)("Percentage of non-crashed sessions"),[n.STABILITY]:(0,r.t)("The percentage of crash free sessions."),[n.ADOPTION]:(0,r.t)("Adoption compares the sessions or users of a release with the total sessions or users for this project in the last 24 hours.")},i={[n.CRASHED]:(0,r.t)("The process was terminated due to an unhandled exception or a request to the server that ended with an error"),[n.CRASH_FREE_SESSIONS]:(0,r.t)("Percentage of non-crashed sessions"),[n.ABNORMAL]:(0,r.t)("An unknown session exit. Like due to loss of power or killed by the operating system"),[n.HEALTHY]:(0,r.t)("A session without errors"),[n.ERRORED]:(0,r.t)("A session with errors"),[n.UNHANDLED]:(0,r.t)("Not handled by user code")},l={crashed:(0,r.t)("The application crashed with a hard crash (eg. segfault)"),[n.ABNORMAL]:(0,r.t)("The application did not properly end the session, for example, due to force-quit"),[n.HEALTHY]:(0,r.t)("The application exited normally and did not observe any errors"),[n.ERRORED]:(0,r.t)("The application exited normally but observed error events while running"),[n.UNHANDLED]:(0,r.t)("The application crashed with a hard crash")};function u(e,t){return function(e){switch("react-native"===e||"java-spring"===e||"apple-ios"===e||"dotnet-aspnetcore"===e?e:null==e?void 0:e.split("-")[0]){case"dotnet":case"java":return{...o,...i};case"java-spring":case"dotnet-aspnetcore":return{...o,...i,[n.CRASHES]:(0,r.t)("A request that resulted in an unhandled exception and hence a Server Error response")};case"android":case"cordova":case"react-native":case"flutter":return{...o,...i,[n.CRASHED]:(0,r.t)("An unhandled exception that resulted in the application crashing")};case"apple":return{...o,...i,[n.CRASHED]:(0,r.t)("An error that resulted in the application crashing")};case"node":case"javascript":return{...o,[n.CRASHED]:(0,r.t)("During the session an unhandled global error/promise rejection occurred."),[n.ABNORMAL]:(0,r.t)("Non applicable for Javascript."),[n.HEALTHY]:(0,r.t)("No errors were captured during session life-time."),[n.ERRORED]:(0,r.t)("During the session at least one handled error occurred."),[n.UNHANDLED]:"An error was captured by the global 'onerror' or 'onunhandledrejection' handler."};case"apple-ios":case"minidump":case"native":return{...o,...l};case"rust":return{...o,...l,[n.CRASHED]:(0,r.t)("The application had an unrecoverable error (a panic)")};default:return{...o,[n.CRASHED]:(0,r.t)("Number of users who experienced an unhandled error"),[n.ABNORMAL]:(0,r.t)("An unknown session exit"),[n.HEALTHY]:i.healthy,[n.ERRORED]:i.errored,[n.UNHANDLED]:i.unhandled}}}(t)[e]}}}]);
//# sourceMappingURL=../sourcemaps/app_utils_sessions_tsx.ca96916d826cfd24ceb0e6cecd1ed46b.js.map