"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_modals_dashboardWidgetQuerySelectorModal_tsx"],{"./app/components/modals/dashboardWidgetQuerySelectorModal.tsx":(e,t,s)=>{s.r(t),s.d(t,{modalCss:()=>_,default:()=>Z});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),r=s("../node_modules/react-router/es/index.js"),n=s("./app/components/button.tsx"),d=s("./app/icons/index.tsx"),a=s("./app/locale.tsx"),l=s("./app/styles/space.tsx"),p=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),c=s("./app/utils/withApi.tsx"),u=s("./app/utils/withGlobalSelection.tsx"),m=s("./app/views/dashboardsV2/utils.tsx"),h=s("./app/views/settings/components/forms/controls/input.tsx"),y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class g extends i.Component{renderQueries(){const{organization:e,widget:t,selection:s}=this.props;return t.queries.map(((o,n)=>{const l=(0,m.tT)(t.title,o,s,t.displayType),c=l.getResultsViewUrlTarget(e.slug),u=l.getYAxisOptions().map((({value:e})=>e));return c.query.yAxis=o.fields.filter((e=>u.includes(e))).slice(0,3),(0,y.tZ)(i.Fragment,{children:(0,y.BX)(x,{children:[(0,y.BX)(v,{children:[(0,y.tZ)(f,{htmlFor:"smart-search-input","aria-label":(0,a.t)("Search events"),children:(0,y.tZ)(d.jV,{})}),(0,y.tZ)(b,{value:o.conditions,disabled:!0})]}),(0,y.tZ)(w,{priority:"primary",icon:(0,y.tZ)(d.g6,{size:"xs",direction:"right"}),onClick:()=>{(0,p.Z)("dashboards_views.query_selector.selected",{organization:e,widget_type:t.displayType}),r.browserHistory.push(c)}})]})},n)}))}render(){const{Body:e,Header:t,widget:s}=this.props;return(0,y.BX)(i.Fragment,{children:[(0,y.tZ)(t,{closeButton:!0,children:(0,y.tZ)("h4",{children:s.title})}),(0,y.BX)(e,{children:[(0,y.tZ)("p",{children:(0,a.t)("Multiple queries were used to create this widget visualization. Which query would you like to view in Discover?")}),this.renderQueries()]})]})}}g.displayName="DashboardWidgetQuerySelectorModal";const b=(0,o.Z)(h.Z,{target:"e10oo76w4"})({name:"97snz3",styles:"text-overflow:ellipsis;padding:0px;box-shadow:none;height:auto;&:disabled{border:none;cursor:default;}"}),x=(0,o.Z)("div",{target:"e10oo76w3"})("display:flex;margin-bottom:",(0,l.Z)(1),";"),w=(0,o.Z)(n.ZP,{target:"e10oo76w2"})("margin-left:",(0,l.Z)(1),";"),v=(0,o.Z)("div",{target:"e10oo76w1"})("border:1px solid ",(e=>e.theme.border),";box-shadow:inset ",(e=>e.theme.dropShadowLight),";background:",(e=>e.theme.backgroundSecondary),";padding:7px ",(0,l.Z)(1),";position:relative;display:grid;grid-template-columns:max-content 1fr max-content;grid-gap:",(0,l.Z)(1),";align-items:start;flex-grow:1;border-radius:",(e=>e.theme.borderRadius),";"),f=(0,o.Z)("label",{target:"e10oo76w0"})("display:flex;padding:",(0,l.Z)(.5)," 0;margin:0;color:",(e=>e.theme.gray300),";"),_={name:"l07bt5",styles:"width:100%;max-width:700px;margin:70px auto"},Z=(0,c.Z)((0,u.Z)(g))},"./app/views/dashboardsV2/types.tsx":(e,t,s)=>{s.d(t,{ZU:()=>o,FO:()=>i,n3:()=>r});const o=30;let i,r;!function(e){e.AREA="area",e.BAR="bar",e.LINE="line",e.TABLE="table",e.WORLD_MAP="world_map",e.BIG_NUMBER="big_number",e.STACKED_AREA="stacked_area",e.TOP_N="top_n"}(i||(i={})),function(e){e.VIEW="view",e.EDIT="edit",e.CREATE="create",e.PENDING_DELETE="pending_delete"}(r||(r={}))},"./app/views/dashboardsV2/utils.tsx":(e,t,s)=>{s.d(t,{qk:()=>p,tT:()=>c,y1:()=>m}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("../node_modules/lodash/cloneDeep.js"),i=s.n(o),r=s("../node_modules/lodash/pick.js"),n=s.n(r),d=s("./app/utils/dates.tsx"),a=s("./app/utils/discover/eventView.tsx"),l=s("./app/views/dashboardsV2/types.tsx");function p(e){return i()(e)}function c(e,t,s,o){const{start:i,end:r,period:n}=s.datetime,{projects:p,environments:c}=s,u=o===l.FO.WORLD_MAP?["geo.country_code",...t.fields]:t.fields,m=o===l.FO.WORLD_MAP?"".concat(t.conditions," has:geo.country_code"):t.conditions;return a.ZP.fromSavedQuery({id:void 0,name:e,version:2,fields:u,query:m,orderby:t.orderby,projects:p,range:n,start:i?(0,d.v5)(i):void 0,end:r?(0,d.v5)(r):void 0,environment:c})}function u(e){return"string"==typeof e?[e]:e}function m(e){if(e){const t=u(e.queryNames),s=u(e.queryConditions),o=u(e.queryFields),i=[];if(s&&t&&o&&"string"==typeof e.queryOrderby&&s.forEach(((s,r)=>{i.push({name:t[r],conditions:s,fields:o,orderby:e.queryOrderby})})),e.title&&e.displayType&&e.interval&&i.length>0)return{...n()(e,["title","displayType","interval"]),queries:i}}}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_dashboardWidgetQuerySelectorModal_tsx.ba2edd0bedc757e746b6f928051ef1fc.js.map