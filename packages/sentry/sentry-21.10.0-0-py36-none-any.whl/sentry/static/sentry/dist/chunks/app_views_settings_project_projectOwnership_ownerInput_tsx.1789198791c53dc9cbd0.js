(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_project_projectOwnership_ownerInput_tsx"],{"./app/actionCreators/projects.tsx":(e,t,s)=>{"use strict";s.d(t,{Vx:()=>h,Nh:()=>u,$P:()=>g,pK:()=>Z,rR:()=>f,bL:()=>b,Oe:()=>x,M9:()=>S,TA:()=>j,$L:()=>v,iC:()=>y,xV:()=>w,mf:()=>C}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/lodash/chunk.js"),a=s.n(r),o=s("../node_modules/lodash/debounce.js"),i=s.n(o),n=s("./app/actionCreators/indicator.tsx"),l=s("./app/actions/projectActions.tsx"),c=s("./app/locale.tsx"),d=s("./app/stores/projectsStatsStore.tsx");function h(e,t){l.Z.update(t.projectId,t.data);const s="/projects/".concat(t.orgId,"/").concat(t.projectId,"/");return e.requestPromise(s,{method:"PUT",data:t.data}).then((e=>(l.Z.updateSuccess(e),e)),(e=>{throw l.Z.updateError(e,t.projectId),e}))}function u(e,t){l.Z.loadStats(t.orgId,t.data);const s="/organizations/".concat(t.orgId,"/stats/");e.request(s,{query:t.query,success:e=>{l.Z.loadStatsSuccess(e)},error:e=>{l.Z.loadStatsError(e)}})}const p=new Set,m=i()(((e,t,s)=>{const r=d.Z.getAll(),o=Object.values(r).map((({id:e})=>e)),i=Array.from(t).filter((e=>!o.includes(e)));if(!i.length)return void p.clear();const h=a()(i,10).map((t=>((e,t,s,r)=>{const a=t.map((e=>"id:".concat(e))).join(" "),o="/organizations/".concat(s,"/projects/"),i={statsPeriod:"24h",query:a,...r};return e.requestPromise(o,{query:i})})(e,t,s.orgId,s.query)));Promise.all(h).then((e=>{l.Z.loadStatsForProjectSuccess(e.reduce(((e,t)=>e.concat(t)),[]))})).catch((()=>{(0,n.Iw)((0,c.t)("Unable to fetch all project stats"))})),p.clear()}),50);function g(e,t,s){p.add(t),m(e,p,s)}function Z(e){l.Z.setActive(e)}function f(e,t,s){const r="/projects/".concat(t,"/").concat(s.slug,"/");return l.Z.removeProject(s),e.requestPromise(r,{method:"DELETE"}).then((()=>{l.Z.removeProjectSuccess(s),(0,n.S9)((0,c._N)("[project] was successfully removed",{project:s.slug}))}),(e=>{throw l.Z.removeProjectError(s),(0,n.Iw)((0,c._N)("Error removing [project]",{project:s.slug})),e}))}function b(e,t,s,r){const a="/projects/".concat(t,"/").concat(s.slug,"/transfer/");return e.requestPromise(a,{method:"POST",data:{email:r}}).then((()=>{(0,n.S9)((0,c._N)("A request was sent to move [project] to a different organization",{project:s.slug}))}),(e=>{let t="";var r;throw e.status>=400&&e.status<500&&e.responseJSON&&(t=null===(r=e.responseJSON)||void 0===r?void 0:r.detail),t?(0,n.Iw)((0,c._N)("Error transferring [project]. [message]",{project:s.slug,message:t})):(0,n.Iw)((0,c._N)("Error transferring [project]",{project:s.slug})),e}))}function x(e,t,s,r){const a="/projects/".concat(t,"/").concat(s,"/teams/").concat(r.slug,"/");return(0,n.E3)(),l.Z.addTeam(r),e.requestPromise(a,{method:"POST"}).then((e=>{(0,n.S9)((0,c._N)("[team] has been added to the [project] project",{team:"#".concat(r.slug),project:s})),l.Z.addTeamSuccess(r,s),l.Z.updateSuccess(e)}),(e=>{throw(0,n.Iw)((0,c._N)("Unable to add [team] to the [project] project",{team:"#".concat(r.slug),project:s})),l.Z.addTeamError(),e}))}function S(e,t,s,r){const a="/projects/".concat(t,"/").concat(s,"/teams/").concat(r,"/");return(0,n.E3)(),l.Z.removeTeam(r),e.requestPromise(a,{method:"DELETE"}).then((e=>{(0,n.S9)((0,c._N)("[team] has been removed from the [project] project",{team:"#".concat(r),project:s})),l.Z.removeTeamSuccess(r,s),l.Z.updateSuccess(e)}),(e=>{throw(0,n.Iw)((0,c._N)("Unable to remove [team] from the [project] project",{team:"#".concat(r),project:s})),l.Z.removeTeamError(e),e}))}function j(e,t){l.Z.changeSlug(e,t)}function v(e,t,s,r,a,o={}){return e.requestPromise("/teams/".concat(t,"/").concat(s,"/projects/"),{method:"POST",data:{name:r,platform:a,default_rules:o.defaultRules}})}function y(e,t,s,r){return e.requestPromise("/projects/".concat(t,"/").concat(s,"/docs/").concat(r,"/"))}function w(e,t){return e.requestPromise("/organizations/".concat(t,"/projects-count/"))}async function C(e,t,s){return(await e.requestPromise("/organizations/".concat(t,"/releases/stats/"),{method:"GET",query:{statsPeriod:"90d",project:s,per_page:1}})).length>0}},"./app/actions/projectActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s("../node_modules/reflux/src/index.js");const a=s.n(r)().createActions(["addTeam","addTeamError","addTeamSuccess","changeSlug","createSuccess","loadProjects","loadStats","loadStatsError","loadStatsForProjectSuccess","loadStatsSuccess","removeProject","removeProjectError","removeProjectSuccess","removeTeam","removeTeamError","removeTeamSuccess","reset","setActive","update","updateError","updateSuccess"])},"./app/actions/teamActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s("../node_modules/reflux/src/index.js");const a=s.n(r)().createActions(["createTeam","createTeamError","createTeamSuccess","fetchAll","fetchAllError","fetchAllSuccess","fetchDetails","fetchDetailsError","fetchDetailsSuccess","loadTeams","loadUserTeams","removeTeam","removeTeamError","removeTeamSuccess","update","updateError","updateSuccess"])},"./app/components/avatar/actorAvatar.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/react/index.js"),o=s("../node_modules/@sentry/minimal/esm/index.js"),i=s("./app/components/avatar/teamAvatar.tsx"),n=s("./app/components/avatar/userAvatar.tsx"),l=s("./app/stores/memberListStore.tsx"),c=s("./app/stores/teamStore.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class h extends a.Component{render(){const{actor:e,...t}=this.props;if("user"===e.type){var s;const r=e.id&&null!==(s=l.Z.getById(e.id))&&void 0!==s?s:e;return(0,d.tZ)(n.Z,{user:r,...t})}if("team"===e.type){const s=c.Z.getById(e.id);return(0,d.tZ)(i.Z,{team:s,...t})}return o.$e((t=>{t.setExtra("actor",e),o.Tb(new Error("Unknown avatar type"))})),null}}h.displayName="ActorAvatar",(0,r.Z)(h,"defaultProps",{size:24,hasTooltip:!0});const u=h},"./app/components/forms/form.tsx":(e,t,s)=>{"use strict";s.d(t,{G:()=>m,Z:()=>g});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),i=s("../node_modules/lodash/isEqual.js"),n=s.n(i),l=s("./app/components/button.tsx"),c=s("./app/components/forms/formContext.tsx"),d=s("./app/components/forms/state.tsx"),h=s("./app/locale.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends o.Component{constructor(e,t){super(e,t),(0,r.Z)(this,"onSubmit",(e=>{if(e.preventDefault(),!this.props.onSubmit)throw new Error("onSubmit is a required prop");this.props.onSubmit(this.state.data,this.onSubmitSuccess,this.onSubmitError)})),(0,r.Z)(this,"onSubmitSuccess",(e=>{this.setState({state:d.Z.READY,errors:{},initialData:{...this.state.data,...e||{}}}),this.props.onSubmitSuccess&&this.props.onSubmitSuccess(e)})),(0,r.Z)(this,"onSubmitError",(e=>{this.setState({state:d.Z.ERROR,errors:e.responseJSON}),this.props.resetOnError&&this.setState({initialData:{}}),this.props.onSubmitError&&this.props.onSubmitError(e)})),(0,r.Z)(this,"onFieldChange",((e,t)=>{this.setState((s=>({data:{...s.data,[e]:t}})))})),this.state={data:{...this.props.initialData},errors:{},initialData:{...this.props.initialData},state:d.Z.READY}}getContext(){const{data:e,errors:t}=this.state;return{form:{data:e,errors:t,onFieldChange:this.onFieldChange}}}render(){const e=this.state.state===d.Z.SAVING,{initialData:t,data:s}=this.state,{errorMessage:r,hideErrors:a,requireChanges:o}=this.props,i=!o||Object.keys(s).length&&!n()(s,t),p=this.state.state===d.Z.ERROR,g=this.state.errors&&this.state.errors.non_field_errors;return(0,u.tZ)(c.Z.Provider,{value:this.getContext(),children:(0,u.BX)(m,{onSubmit:this.onSubmit,className:this.props.className,children:[p&&!a&&(0,u.tZ)("div",{className:"alert alert-error alert-block",children:g?(0,u.BX)("div",{children:[(0,u.tZ)("p",{children:(0,h.t)("Unable to save your changes. Please correct the following errors try again.")}),(0,u.tZ)("ul",{children:g.map(((e,t)=>(0,u.tZ)("li",{children:e},t)))})]}):r}),this.props.children,(0,u.BX)("div",{className:this.props.footerClass,style:{marginTop:25},children:[(0,u.tZ)(l.ZP,{priority:"primary",disabled:e||this.props.submitDisabled||!i,type:"submit",children:this.props.submitLabel}),this.props.onCancel&&(0,u.tZ)(l.ZP,{type:"button",disabled:e,onClick:this.props.onCancel,style:{marginLeft:5},children:this.props.cancelLabel}),this.props.extraButton]})]})})}}p.displayName="Form",(0,r.Z)(p,"defaultProps",{cancelLabel:(0,h.t)("Cancel"),submitLabel:(0,h.t)("Save Changes"),submitDisabled:!1,footerClass:"form-actions align-right",className:"form-stacked",requireChanges:!1,hideErrors:!1,resetOnError:!1,errorMessage:(0,h.t)("Unable to save your changes. Please ensure all fields are valid and try again.")});const m=(0,a.Z)("form",{target:"el3x56x0"})(""),g=p},"./app/components/forms/formContext.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});const r=(0,s("../node_modules/react/index.js").createContext)({})},"./app/components/forms/formField.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("../node_modules/react/index.js"),i=s("../node_modules/classnames/index.js"),n=s.n(i),l=s("./app/components/forms/formContext.tsx"),c=s("./app/components/questionTooltip.tsx"),d=s("./app/utils.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends o.PureComponent{constructor(e,t){super(e,t),(0,r.Z)(this,"onChange",(e=>{const t=e.target.value;this.setValue(t)})),(0,r.Z)(this,"setValue",(e=>{const t=(this.context||{}).form;this.setState({value:e},(()=>{var e,s;const r=this.coerceValue(this.state.value);null===(e=(s=this.props).onChange)||void 0===e||e.call(s,r),null==t||t.onFieldChange(this.props.name,r)}))})),this.state={error:null,value:this.getValue(e,t)}}componentDidMount(){}UNSAFE_componentWillReceiveProps(e,t){const s=this.getError(e,t);if(s!==this.state.error&&this.setState({error:s}),this.props.value!==e.value||(0,d.ri)(t.form)){const s=this.getValue(e,t);s!==this.state.value&&this.setValue(s)}}componentWillUnmount(){}getValue(e,t){const s=(t||this.context||{}).form;return e=e||this.props,(0,d.ri)(e.value)?e.value:s&&s.data.hasOwnProperty(e.name)?(0,d.ri)(s.data[e.name])?s.data[e.name]:"":(0,d.ri)(e.defaultValue)?e.defaultValue:""}getError(e,t){const s=(t||this.context||{}).form;return e=e||this.props,(0,d.ri)(e.error)?e.error:s&&s.errors[e.name]||null}getId(){return"id-".concat(this.props.name)}coerceValue(e){return e}getField(){throw new Error("Must be implemented by child.")}getClassName(){throw new Error("Must be implemented by child.")}getFinalClassNames(){const{className:e,required:t}=this.props,{error:s}=this.state;return n()(e,this.getClassName(),{"has-error":!!s,required:t})}renderDisabledReason(){const{disabled:e,disabledReason:t}=this.props;return e&&t?(0,h.tZ)(c.Z,{title:t,position:"top",size:"sm"}):null}render(){const{label:e,hideErrorMessage:t,help:s,style:r}=this.props,{error:a}=this.state,o=this.getFinalClassNames(),i=a&&!t;return(0,h.tZ)("div",{style:r,className:o,children:(0,h.BX)("div",{className:"controls",children:[e&&(0,h.tZ)("label",{htmlFor:this.getId(),className:"control-label",children:e}),this.getField(),this.renderDisabledReason(),(0,d.ri)(s)&&(0,h.tZ)("p",{className:"help-block",children:s}),i&&(0,h.tZ)(p,{children:a})]})})}}u.displayName="FormField",(0,r.Z)(u,"defaultProps",{hideErrorMessage:!1,disabled:!1,required:!1}),(0,r.Z)(u,"contextType",l.Z);const p=(0,a.Z)("p",{target:"ewj2mzu0"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.red300),";")},"./app/components/forms/multiSelectControl.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s("../node_modules/react/index.js"),a=s("./app/components/forms/selectControl.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,r.forwardRef)((function(e,t){return(0,o.tZ)(a.Z,{forwardedRef:t,...e,multiple:!0})}))},"./app/components/forms/selectField.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./app/utils.tsx")),i=s("./app/components/forms/form.tsx"),n=s("./app/components/forms/formField.tsx"),l=s("./app/components/forms/selectControl.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends n.Z{constructor(...e){super(...e),(0,r.Z)(this,"onChange",(e=>{this.setValue(e)}))}UNSAFE_componentWillReceiveProps(e,t){const s=this.getError(e,t);if(s!==this.state.error&&this.setState({error:s}),this.props.value!==e.value||(0,o.ri)(t.form)){const s=this.getValue(e,t),r=this.coerceValue(this.state.value);s!==r&&!!s!=!!r&&this.setValue(s)}}getValue(e,t){const s=(t||this.context||{}).form;e=e||this.props;const r=this.isMultiple(e)?[]:"";return(0,o.ri)(e.value)?e.value:s&&s.data.hasOwnProperty(e.name)?(0,o.ri)(s.data[e.name])?s.data[e.name]:r:(0,o.ri)(e.defaultValue)?e.defaultValue:r}coerceValue(e){return e?this.isMultiple()?e.map((e=>e.value)):e.hasOwnProperty("value")?e.value:e:""}isMultiple(e){return(e=e||this.props).multi||e.multiple}getClassName(){return""}getField(){const{options:e,clearable:t,creatable:s,choices:r,placeholder:a,disabled:o,name:i,isLoading:n}=this.props;return(0,c.tZ)(h,{creatable:s,id:this.getId(),choices:r,options:e,placeholder:a,disabled:o,value:this.state.value,onChange:this.onChange,clearable:t,multiple:this.isMultiple(),name:i,isLoading:n})}}(0,r.Z)(d,"defaultProps",{...n.Z.defaultProps,clearable:!0,multiple:!1});const h=(0,a.Z)(l.Z,{target:"e1a1h86v0"})(i.G," &,.form-stacked &{margin-bottom:15px;.control-group &{margin-bottom:0;}}")},"./app/components/textOverflow.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/react/index.js"),s("./app/styles/overflowEllipsis.tsx")),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,r.Z)((({isParagraph:e,className:t,children:s,"data-test-id":r})=>{const a=e?"p":"div";return(0,o.tZ)(a,{className:t,"data-test-id":r,children:s})}),{target:"eyxbn6j0"})((e=>"right"===e.ellipsisDirection?a.Z:"\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n  direction: rtl;\n  text-align: left;\n"),";width:auto;line-height:1.1;");i.defaultProps={ellipsisDirection:"right",isParagraph:!1};const n=i},"./app/stores/memberListStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s("../node_modules/reflux/src/index.js");const a={loaded:!1,state:[],init(){this.state=[],this.loaded=!1},loadInitialData(e){this.state=e,this.loaded=!0,this.trigger(this.state,"initial")},isLoaded(){return this.loaded},getById(e){if(this.state){e=""+e;for(let t=0;t<this.state.length;t++)if(this.state[t].id===e)return this.state[t]}},getByEmail(e){if(this.state){e=e.toLowerCase();for(let t=0;t<this.state.length;t++)if(this.state[t].email.toLowerCase()===e)return this.state[t]}},getAll(){return this.state}},o=s.n(r)().createStore(a)},"./app/stores/projectsStatsStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/reflux/src/index.js"),a=s.n(r),o=s("./app/actions/projectActions.tsx");const i={itemsBySlug:{},init(){this.reset(),this.listenTo(o.Z.loadStatsForProjectSuccess,this.onStatsLoadSuccess),this.listenTo(o.Z.update,this.onUpdate),this.listenTo(o.Z.updateError,this.onUpdateError)},getInitialState(){return this.itemsBySlug},reset(){this.itemsBySlug={},this.updatingItems=new Map},onStatsLoadSuccess(e){e.forEach((e=>{this.itemsBySlug[e.slug]=e})),this.trigger(this.itemsBySlug)},onUpdate(e,t){const s=this.getBySlug(e);if(this.updatingItems.set(e,s),!s)return;const r={...s,...t};this.itemsBySlug={...this.itemsBySlug,[s.slug]:r},this.trigger(this.itemsBySlug)},onUpdateSuccess(e){this.updatingItems.delete(e.slug)},onUpdateError(e,t){const s=this.updatingItems.get(t);s&&(this.updatingItems.delete(t),this.itemsBySlug={...this.itemsBySlug,[s.slug]:{...s}},this.trigger(this.itemsBySlug))},getAll(){return this.itemsBySlug},getBySlug(e){return this.itemsBySlug[e]}},n=a().createStore(i)},"./app/stores/projectsStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/reflux/src/index.js"),a=s.n(r),o=s("./app/actions/projectActions.tsx"),i=s("./app/actions/teamActions.tsx");const n={itemsById:{},loading:!0,init(){this.reset(),this.listenTo(o.Z.addTeamSuccess,this.onAddTeam),this.listenTo(o.Z.changeSlug,this.onChangeSlug),this.listenTo(o.Z.createSuccess,this.onCreateSuccess),this.listenTo(o.Z.loadProjects,this.loadInitialData),this.listenTo(o.Z.loadStatsSuccess,this.onStatsLoadSuccess),this.listenTo(o.Z.removeTeamSuccess,this.onRemoveTeam),this.listenTo(o.Z.reset,this.reset),this.listenTo(o.Z.updateSuccess,this.onUpdateSuccess),this.listenTo(i.Z.removeTeamSuccess,this.onDeleteTeam)},reset(){this.itemsById={},this.loading=!0},loadInitialData(e){this.itemsById=e.reduce(((e,t)=>(e[t.id]=t,e)),{}),this.loading=!1,this.trigger(new Set(Object.keys(this.itemsById)))},onChangeSlug(e,t){const s=this.getBySlug(e);if(!s)return;const r={...s,slug:t};this.itemsById={...this.itemsById,[r.id]:r},this.trigger(new Set([s.id]))},onCreateSuccess(e){this.itemsById={...this.itemsById,[e.id]:e},this.trigger(new Set([e.id]))},onUpdateSuccess(e){const t=this.getById(e.id);if(!t)return;const s=Object.assign({},t,e);this.itemsById={...this.itemsById,[t.id]:s},this.trigger(new Set([e.id]))},onStatsLoadSuccess(e){const t=[];Object.entries(e||{}).forEach((([e,s])=>{e in this.itemsById&&(this.itemsById[e].stats=s,t.push(e))})),this.trigger(new Set(t))},onDeleteTeam(e){const t=this.getWithTeam(e).map((t=>(this.removeTeamFromProject(e,t),t.id)));this.trigger(new Set([t]))},onRemoveTeam(e,t){const s=this.getBySlug(t);s&&(this.removeTeamFromProject(e,s),this.trigger(new Set([s.id])))},onAddTeam(e,t){const s=this.getBySlug(t);s&&(this.itemsById={...this.itemsById,[s.id]:{...s,teams:[...s.teams,e]}},this.trigger(new Set([s.id])))},removeTeamFromProject(e,t){const s=t.teams.filter((({slug:t})=>t!==e));this.itemsById={...this.itemsById,[t.id]:{...t,teams:s}}},getWithTeam(e){return this.getAll().filter((({teams:t})=>t.find((({slug:t})=>t===e))))},isLoading(){return this.loading},getAll(){return Object.values(this.itemsById).sort(((e,t)=>e.slug.localeCompare(t.slug)))},getById(e){return this.getAll().find((t=>t.id===e))},getBySlug(e){return this.getAll().find((t=>t.slug===e))},getState(){return{projects:this.getAll(),loading:this.loading}}},l=a().createStore(n)},"./app/stores/teamStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/reflux/src/index.js"),a=s.n(r),o=s("./app/actions/teamActions.tsx");const i={initialized:!1,state:{teams:[],loadedUserTeams:!1,loading:!0,hasMore:null},init(){this.reset(),this.listenTo(o.Z.createTeamSuccess,this.onCreateSuccess),this.listenTo(o.Z.fetchDetailsSuccess,this.onUpdateSuccess),this.listenTo(o.Z.loadTeams,this.loadInitialData),this.listenTo(o.Z.loadUserTeams,this.loadUserTeams),this.listenTo(o.Z.removeTeamSuccess,this.onRemoveSuccess),this.listenTo(o.Z.updateSuccess,this.onUpdateSuccess)},reset(){this.state={teams:[],loadedUserTeams:!1,loading:!0,hasMore:null}},loadInitialData(e,t=null){this.initialized=!0,this.state={teams:e.sort(((e,t)=>e.slug.localeCompare(t.slug))),loadedUserTeams:e.length<100,loading:!1,hasMore:t},this.trigger(new Set(e.map((e=>e.id))))},loadUserTeams(e){const t=this.state.teams.reduce(((e,t)=>(e[t.id]=t,e)),{});e.reduce(((e,t)=>(e[t.id]=t,e)),t);const s=Object.values(t).sort(((e,t)=>e.slug.localeCompare(t.slug)));this.state={...this.state,loadedUserTeams:!0,teams:s},this.trigger(new Set(Object.keys(t)))},onUpdateSuccess(e,t){if(!t)return;if(!this.getBySlug(e))return this.state={...this.state,teams:[...this.state.teams,t]},void this.trigger(new Set([e]));if(t.slug!==e){const s=[...this.state.teams.filter((({slug:t})=>t!==e)),t];return this.state={...this.state,teams:s},void this.trigger(new Set([t.slug]))}const s=[...this.state.teams],r=s.findIndex((e=>e.slug===t.slug));s[r]=t,this.state={...this.state,teams:s},this.trigger(new Set([e]))},onRemoveSuccess(e){const{teams:t}=this.state;this.loadInitialData(t.filter((t=>t.slug!==e)))},onCreateSuccess(e){this.loadInitialData([...this.state.teams,e])},getState(){return this.state},getById(e){const{teams:t}=this.state;return t.find((t=>t.id.toString()===e.toString()))||null},getBySlug(e){const{teams:t}=this.state;return t.find((t=>t.slug===e))||null},getAll(){return this.state.teams}},n=a().createStore(i)},"./app/utils/withProjects.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/stores/projectsStore.tsx"),i=s("./app/utils/getDisplayName.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends a.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{projects:o.Z.getAll(),loading:o.Z.isLoading()}),(0,r.Z)(this,"unsubscribe",o.Z.listen((()=>this.setState({projects:o.Z.getAll(),loading:o.Z.isLoading()})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){return(0,n.tZ)(e,{...this.props,projects:this.state.projects,loadingProjects:this.state.loading})}}return t.displayName="WithProjects",(0,r.Z)(t,"displayName","withProjects(".concat((0,i.Z)(e),")")),t}},"./app/views/settings/project/projectOwnership/ownerInput.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>he});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-autosize-textarea/lib/index.js"),n=s("./app/actionCreators/indicator.tsx"),l=s("./app/api.tsx"),c=s("./app/components/button.tsx"),d=s("./app/locale.tsx"),h=s("./app/stores/memberListStore.tsx"),u=s("./app/stores/projectsStore.tsx"),p=s("./app/styles/input.tsx"),m=s("./app/utils.tsx"),g=s("./app/components/forms/selectField.tsx"),Z=s("./app/components/tag.tsx"),f=s("./app/components/textOverflow.tsx"),b=s("./app/icons/index.tsx"),x=s("./app/styles/space.tsx"),S=s("./app/views/settings/components/forms/controls/input.tsx"),j=s("../node_modules/react-dom/index.js"),v=s("../node_modules/lodash/debounce.js"),y=s.n(v),w=s("../node_modules/lodash/isEqual.js"),C=s.n(w),T=s("./app/actionCreators/projects.tsx"),_=s("./app/components/avatar/actorAvatar.tsx"),I=s("./app/components/forms/multiSelectControl.tsx"),P=s("./app/components/idBadge/index.tsx"),B=s("./app/components/tooltip.tsx"),E=s("./app/stores/teamStore.tsx"),N=s("./app/utils/withApi.tsx"),A=s("./app/utils/withProjects.tsx"),U=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function O({data:e,removeProps:t}){return(0,U.tZ)(z,{onClick:t.onClick,children:(0,U.tZ)(_.Z,{actor:e.actor,size:28})})}O.displayName="ValueComponent";const q=e=>"".concat(e.email&&e.email.toLowerCase()," ").concat(e.name&&e.name.toLowerCase());var k={name:"833hqy",styles:"width:200px"};class V extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{loading:!1,inputValue:""}),(0,r.Z)(this,"selectRef",o.createRef()),(0,r.Z)(this,"renderUserBadge",(e=>(0,U.tZ)(P.Z,{avatarSize:24,user:e,hideEmail:!0,useLink:!1}))),(0,r.Z)(this,"createMentionableUser",(e=>({value:(0,m.Zh)(e.id),label:this.renderUserBadge(e),searchKey:q(e),actor:{type:"user",id:e.id,name:e.name}}))),(0,r.Z)(this,"createUnmentionableUser",(({user:e})=>({...this.createMentionableUser(e),disabled:!0,label:(0,U.tZ)(D,{children:(0,U.tZ)(B.Z,{position:"left",title:(0,d.t)("%s is not a member of project",e.name||e.email),children:this.renderUserBadge(e)})})}))),(0,r.Z)(this,"createMentionableTeam",(e=>({value:(0,m.dZ)(e.id),label:(0,U.tZ)(P.Z,{team:e}),searchKey:"#".concat(e.slug),actor:{type:"team",id:e.id,name:e.slug}}))),(0,r.Z)(this,"createUnmentionableTeam",(e=>{const{organization:t}=this.props,s=t.access.includes("project:write");return{...this.createMentionableTeam(e),disabled:!0,label:(0,U.BX)(R,{children:[(0,U.tZ)(D,{children:(0,U.tZ)(B.Z,{position:"left",title:(0,d.t)("%s is not a member of project","#".concat(e.slug)),children:(0,U.tZ)(P.Z,{team:e})})}),(0,U.tZ)(B.Z,{title:s?(0,d.t)("Add %s to project","#".concat(e.slug)):(0,d.t)("You do not have permission to add team to project."),children:(0,U.tZ)(L,{size:"zero",borderless:!0,disabled:!s,onClick:this.handleAddTeamToProject.bind(this,e),icon:(0,U.tZ)(b.N_,{isCircled:!0})})})]})}})),(0,r.Z)(this,"handleChange",(e=>{this.props.onChange(e)})),(0,r.Z)(this,"handleInputChange",(e=>{this.setState({inputValue:e}),this.props.onInputChange&&this.props.onInputChange(e)})),(0,r.Z)(this,"queryMembers",y()(((e,t)=>{const{api:s,organization:r}=this.props;return s?s.requestPromise("/organizations/".concat(r.slug,"/members/"),{query:{query:e}}).then((e=>t(null,e)),(e=>t(e))):null}),250)),(0,r.Z)(this,"handleLoadOptions",(()=>{const e=this.getMentionableUsers(),t=this.getMentionableTeams(),s=this.getTeamsNotInProject(t),r=e.map((({actor:e})=>e.id));return new Promise(((e,t)=>{this.queryMembers(this.state.inputValue,((s,r)=>{s?t(s):e(r)}))})).then((e=>e?e.filter((({user:e})=>e&&-1===r.indexOf(e.id))).map(this.createUnmentionableUser):[])).then((r=>[...e,...t,...s,...r]))}))}componentDidUpdate(e){C()(this.props.projects,e.projects)||this.closeSelectMenu()}getMentionableUsers(){return h.Z.getAll().map(this.createMentionableUser)}getMentionableTeams(){const{project:e}=this.props,t=u.Z.getBySlug(e.slug);return t?t.teams.map(this.createMentionableTeam):[]}getTeamsNotInProject(e=[]){const t=E.Z.getAll()||[],s=e.map((({actor:e})=>e.id));return t.filter((e=>-1===s.indexOf(e.id))).map(this.createUnmentionableTeam)}closeSelectMenu(){if(this.selectRef.current){const e=j.findDOMNode(this.selectRef.current),t=null==e?void 0:e.querySelector(".Select-input input");t&&t.blur()}}async handleAddTeamToProject(e){const{api:t,organization:s,project:r,value:a}=this.props,o=[...a];this.props.onChange([...this.props.value,this.createMentionableTeam(e)]);try{await(0,T.Oe)(t,s.slug,r.slug,e)}catch(e){this.props.onChange(o),this.closeSelectMenu()}}render(){return(0,U.tZ)(I.Z,{name:"owners",filterOption:(e,t)=>e.data.searchKey.indexOf(t)>-1,ref:this.selectRef,loadOptions:this.handleLoadOptions,defaultOptions:!0,async:!0,clearable:!0,disabled:this.props.disabled,cache:!1,placeholder:(0,d.t)("owners"),components:{MultiValue:O},onInputChange:this.handleInputChange,onChange:this.handleChange,value:this.props.value,css:k})}}V.displayName="SelectOwners";const M=(0,N.Z)((0,A.Z)(V)),R=(0,a.Z)("div",{target:"e1t7855i3"})({name:"1eoy87d",styles:"display:flex;justify-content:space-between"}),D=(0,a.Z)("div",{target:"e1t7855i2"})({name:"16ooxei",styles:"opacity:0.5;overflow:hidden"}),L=(0,a.Z)(c.ZP,{target:"e1t7855i1"})({name:"ozd7xs",styles:"flex-shrink:0"}),z=(0,a.Z)("a",{target:"e1t7855i0"})("margin-right:",(0,x.Z)(.5),";"),F={text:"",tagName:"",type:"path",owners:[],isValid:!1};function X(e){switch(e){case"path":return"src/example/*";case"url":return"https://example.com/settings/*";case"tag":return"tag-value";default:return""}}class W extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",F),(0,r.Z)(this,"checkIsValid",(()=>{this.setState((e=>({isValid:!!e.text&&e.owners&&!!e.owners.length})))})),(0,r.Z)(this,"handleTypeChange",(e=>{this.setState({type:e}),this.checkIsValid()})),(0,r.Z)(this,"handleTagNameChangeValue",(e=>{this.setState({tagName:e.target.value},this.checkIsValid)})),(0,r.Z)(this,"handleChangeValue",(e=>{this.setState({text:e.target.value}),this.checkIsValid()})),(0,r.Z)(this,"handleChangeOwners",(e=>{this.setState({owners:e}),this.checkIsValid()})),(0,r.Z)(this,"handleAddRule",(()=>{const{type:e,text:t,tagName:s,owners:r,isValid:a}=this.state;if(!a)return void(0,n.Iw)("A rule needs a type, a value, and one or more issue owners.");const o=r.map((e=>{var t;return"team"===e.actor.type?"#".concat(e.actor.name):null===(t=h.Z.getById(e.actor.id))||void 0===t?void 0:t.email})).join(" "),i=t.match(/\s/)?'"'.concat(t,'"'):t,l="".concat("tag"===e?"tags.".concat(s):e,":").concat(i," ").concat(o);this.props.onAddRule(l),this.setState(F)})),(0,r.Z)(this,"handleSelectCandidate",((e,t)=>{this.setState({text:e,type:t}),this.checkIsValid()}))}render(){const{urls:e,paths:t,disabled:s,project:r,organization:a}=this.props,{type:i,text:n,tagName:l,owners:c,isValid:h}=this.state;return(0,U.BX)(o.Fragment,{children:[(t||e)&&(0,U.BX)(J,{children:[t&&t.map((e=>(0,U.BX)(G,{onClick:()=>this.handleSelectCandidate(e,"path"),children:[(0,U.tZ)(Y,{isCircled:!0}),(0,U.tZ)(K,{children:e}),(0,U.tZ)(Z.Z,{children:(0,d.t)("Path")})]},e))),e&&e.map((e=>(0,U.BX)(G,{onClick:()=>this.handleSelectCandidate(e,"url"),children:[(0,U.tZ)(Y,{isCircled:!0}),(0,U.tZ)(K,{children:e}),(0,U.tZ)(Z.Z,{children:(0,d.t)("URL")})]},e)))]}),(0,U.BX)($,{children:[(0,U.tZ)(H,{name:"select-type",value:i,onChange:this.handleTypeChange,options:[{value:"path",label:(0,d.t)("Path")},{value:"tag",label:(0,d.t)("Tag")},{value:"url",label:(0,d.t)("URL")}],style:{width:140},clearable:!1,disabled:s}),"tag"===i&&(0,U.tZ)(ee,{value:l,onChange:this.handleTagNameChangeValue,disabled:s,placeholder:"tag-name"}),(0,U.tZ)(Q,{value:n,onChange:this.handleChangeValue,disabled:s,placeholder:X(i)}),(0,U.tZ)(te,{direction:"right"}),(0,U.tZ)(se,{children:(0,U.tZ)(M,{organization:a,project:r,value:c,onChange:this.handleChangeOwners,disabled:s})}),(0,U.tZ)(re,{priority:"primary",disabled:!h,onClick:this.handleAddRule,icon:(0,U.tZ)(b.N_,{isCircled:!0}),size:"small"})]})]})}}W.displayName="RuleBuilder";const J=(0,a.Z)("div",{target:"e1oeciqa10"})({name:"pr10xp",styles:"margin-bottom:10px"}),K=(0,a.Z)(f.Z,{target:"e1oeciqa9"})({name:"82a6rk",styles:"flex:1"}),G=(0,a.Z)("div",{target:"e1oeciqa8"})("font-family:",(e=>e.theme.text.familyMono),";border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";background-color:",(e=>e.theme.background),";padding:",(0,x.Z)(.25)," ",(0,x.Z)(.5),";margin-bottom:",(0,x.Z)(.5),";cursor:pointer;overflow:hidden;display:flex;align-items:center;"),Y=(0,a.Z)(b.N_,{target:"e1oeciqa7"})("color:",(e=>e.theme.border),";margin-right:5px;flex-shrink:0;"),$=(0,a.Z)("div",{target:"e1oeciqa6"})("display:flex;height:40px;align-items:center;margin-bottom:",(0,x.Z)(2),";"),H=(0,a.Z)(g.Z,{target:"e1oeciqa5"})("margin-right:",(0,x.Z)(1.5),";width:50px;flex-shrink:0;"),Q=(0,a.Z)(S.Z,{target:"e1oeciqa4"})("padding:",(0,x.Z)(1),";line-height:19px;margin-right:",(0,x.Z)(.5),";"),ee=(0,a.Z)(S.Z,{target:"e1oeciqa3"})("padding:",(0,x.Z)(1),";line-height:19px;margin-right:",(0,x.Z)(.5),";width:200px;"),te=(0,a.Z)(b.g6,{target:"e1oeciqa2"})("color:",(e=>e.theme.border),";flex-shrink:0;margin-right:5px;"),se=(0,a.Z)("div",{target:"e1oeciqa1"})("display:flex;align-items:center;margin-right:",(0,x.Z)(1),";"),re=(0,a.Z)(c.ZP,{target:"e1oeciqa0"})("padding:",(0,x.Z)(.5),";"),ae=W;class oe extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{hasChanges:!1,text:null,error:null}),(0,r.Z)(this,"handleUpdateOwnership",(()=>{const{organization:e,project:t,onSave:s}=this.props,{text:r}=this.state;this.setState({error:null});const a=(new l.KU).requestPromise("/projects/".concat(e.slug,"/").concat(t.slug,"/ownership/"),{method:"PUT",data:{raw:r||""}});return a.then((()=>{(0,n.S9)((0,d.t)("Updated issue ownership rules")),this.setState({hasChanges:!1,text:r},(()=>s&&s(r)))})).catch((e=>{this.setState({error:e.responseJSON}),403===e.status?(0,n.Iw)((0,d.t)("You don't have permission to modify issue ownership rules for this project")):400===e.status&&e.responseJSON.raw&&e.responseJSON.raw[0].startsWith("Invalid rule owners:")?(0,n.Iw)((0,d.t)("Unable to save issue ownership rule changes: "+e.responseJSON.raw[0])):(0,n.Iw)((0,d.t)("Unable to save issue ownership rule changes"))})),a})),(0,r.Z)(this,"handleChange",(e=>{this.setState({hasChanges:!0,text:e.target.value})})),(0,r.Z)(this,"handleAddRule",(e=>{const{initialText:t}=this.props;this.setState((({text:s})=>({text:(s||t)+"\n"+e})),this.handleUpdateOwnership)}))}parseError(e){var t;const s=null==e||null===(t=e.raw)||void 0===t?void 0:t[0];return s?s.startsWith("Invalid rule owners:")?(0,U.tZ)(de,{children:s}):(0,U.tZ)(ne,{line:parseInt(null!==(r=null===(a=s.match(/line (\d*),/))||void 0===a?void 0:a[1])&&void 0!==r?r:"",10)-1}):null;var r,a}mentionableUsers(){return h.Z.getAll().map((e=>({id:e.id,display:e.email,email:e.email})))}mentionableTeams(){const{project:e}=this.props,t=u.Z.getBySlug(e.slug);return t?t.teams.map((e=>({id:e.id,display:"#".concat(e.slug),email:e.id}))):[]}render(){const{project:e,organization:t,disabled:s,urls:r,paths:a,initialText:i}=this.props,{hasChanges:n,text:l,error:h}=this.state;return(0,U.BX)(o.Fragment,{children:[(0,U.tZ)(ae,{urls:r,paths:a,organization:t,project:e,onAddRule:this.handleAddRule.bind(this),disabled:s}),(0,U.BX)("div",{style:{position:"relative"},onKeyDown:e=>{e.metaKey&&"Enter"===e.key&&this.handleUpdateOwnership()},children:[(0,U.tZ)(ce,{placeholder:"#example usage\npath:src/example/pipeline/* person@sentry.io #infra\nurl:http://example.com/settings/* #product\ntags.sku_class:enterprise #enterprise",onChange:this.handleChange,disabled:s,value:(0,m.ri)(l)?l:i,spellCheck:"false",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off"}),(0,U.BX)(ie,{children:[(0,U.tZ)("div",{children:this.parseError(h)}),(0,U.tZ)(le,{children:(0,U.tZ)(c.ZP,{size:"small",priority:"primary",onClick:this.handleUpdateOwnership,disabled:s||!n,children:(0,d.t)("Save Changes")})})]})]})]})}}oe.displayName="OwnerInput",(0,r.Z)(oe,"defaultProps",{urls:[],paths:[],disabled:!1});const ie=(0,a.Z)("div",{target:"elg57ml4"})({name:"bcffy2",styles:"display:flex;align-items:center;justify-content:space-between"}),ne=(0,a.Z)("div",{target:"elg57ml3"})(p.T,";width:100%;height:",24,"px;background-color:red;opacity:0.1;pointer-events:none;position:absolute;top:",(({line:e})=>4+24*e),"px;"),le=(0,a.Z)("div",{target:"elg57ml2"})({name:"1cw129c",styles:"text-align:end;padding-top:10px"}),ce=(0,a.Z)(i.Z,{target:"elg57ml1"})((e=>(0,p.T)(e)),";min-height:140px;overflow:auto;outline:0;width:100%;resize:none;margin:0;font-family:",(e=>e.theme.text.familyMono),";word-break:break-all;white-space:pre-wrap;padding-top:",4,"px;line-height:",24,"px;"),de=(0,a.Z)("div",{target:"elg57ml0"})("color:",(e=>e.theme.error),";font-weight:bold;margin-top:12px;"),he=oe},"../node_modules/lodash/_isIterateeCall.js":(e,t,s)=>{var r=s("../node_modules/lodash/eq.js"),a=s("../node_modules/lodash/isArrayLike.js"),o=s("../node_modules/lodash/_isIndex.js"),i=s("../node_modules/lodash/isObject.js");e.exports=function(e,t,s){if(!i(s))return!1;var n=typeof t;return!!("number"==n?a(s)&&o(t,s.length):"string"==n&&t in s)&&r(s[t],e)}},"../node_modules/lodash/chunk.js":(e,t,s)=>{var r=s("../node_modules/lodash/_baseSlice.js"),a=s("../node_modules/lodash/_isIterateeCall.js"),o=s("../node_modules/lodash/toInteger.js"),i=Math.ceil,n=Math.max;e.exports=function(e,t,s){t=(s?a(e,t,s):void 0===t)?1:n(o(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var c=0,d=0,h=Array(i(l/t));c<l;)h[d++]=r(e,c,c+=t);return h}}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_project_projectOwnership_ownerInput_tsx.e5f3c50cf741cbc5b82a10e3b91eab9a.js.map