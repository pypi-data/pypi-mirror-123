version: 1
formatters:
    simple:
        format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    detail:
        format: '%(asctime)s - %(levelname)s - File: %(filename)s - %(funcName)s() - Line: %(lineno)d -  %(message)s'
    email:
        format: '%(levelname)s sent from {$project_name} %(asctime)s - %(levelname)s - File: %(filename)s - %(funcName)s() - Line: %(lineno)d -  %(message)s'

loggers:
    all:
        handlers: [console]
        propagate: true
    warn:
        handlers: [console]
        propagate: true
    error:
        handlers: [console, smtp]
        propagate: true

handlers:
    console:
        class: logging.StreamHandler
        level: DEBUG
        formatter: simple
        stream: ext://sys.stdout
    smtp: # TODO: integrate with QueueHandler so email doesn't block (look at http://flask-logconfig.readthedocs.io/en/latest/ ?)
        # TODO: replace cri.com with some setting or something (or remove it from here and put it in config.py
        class: logging.handlers.SMTPHandler
        level: ERROR
        formatter: email
        mailhost: [internalmail.cri.com, 25]
        fromaddr: {$project_name} <{$project_name}@cri.com>
        toaddrs: [michael.ottoson@cri.com]
        subject: 'Problem encountered with {$project_name}'

root:
  level: DEBUG
  handlers: [console]
  propagate: true
